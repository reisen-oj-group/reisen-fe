import{e as U,u as x,p as c,q as w,r as y,s as _,o as r,v as e,w as u,k as l,B as i,C as E,h as T,aA as B,E as C,I as m,D as M,g as O,_ as k,P as D,f as b,Q as P,aB as $,T as A,U as F,V as N,W as I,x as R,X as q}from"./index-DrYKQVxV.js";import{_ as L}from"./MdEditor.vue_vue_type_script_setup_true_lang-9Q36X1UI.js";import"./markdown-Bv0KnHKH.js";const z={class:"basic-container"},Q=U({__name:"ContestEditBasic",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(v){const t=x(v,"modelValue"),n=c();w(n,()=>{n.value&&([t.value.startTime,t.value.endTime]=n.value)});function s(){}return(f,a)=>{const V=y("el-date-picker"),d=y("el-button");return r(),_("div",z,[e(l(M),{modelValue:t.value,"onUpdate:modelValue":a[7]||(a[7]=o=>t.value=o),"label-width":100},{default:u(()=>[e(l(i),{label:"比赛名称",class:"form-item"},{default:u(()=>[e(l(E),{modelValue:t.value.title,"onUpdate:modelValue":a[0]||(a[0]=o=>t.value.title=o)},null,8,["modelValue"])]),_:1}),e(l(i),{label:"起止时间",class:"form-item"},{default:u(()=>[e(V,{modelValue:n.value,"onUpdate:modelValue":a[1]||(a[1]=o=>n.value=o),type:"datetimerange","start-placeholder":"开始时间","end-placeholder":"结束时间"},null,8,["modelValue"])]),_:1}),e(l(i),{label:"头图",class:"form-item"},{default:u(()=>[e(l(E),{modelValue:t.value.banner,"onUpdate:modelValue":a[2]||(a[2]=o=>t.value.banner=o)},null,8,["modelValue"]),a[8]||(a[8]=T("span",{class:"explain"},"填入比赛头图 URL，用于在比赛列表展示。若为空则不显示头图。",-1))]),_:1}),e(l(i),{label:"描述"},{default:u(()=>[e(L,{class:"editor",modelValue:t.value.description,"onUpdate:modelValue":a[3]||(a[3]=o=>t.value.description=o)},null,8,["modelValue"])]),_:1}),e(l(i),{label:"难度"},{default:u(()=>[e(l(B),{modelValue:t.value.difficulty,"onUpdate:modelValue":a[4]||(a[4]=o=>t.value.difficulty=o),size:"large"},null,8,["modelValue"])]),_:1}),e(l(i),{label:"赛制"},{default:u(()=>[e(l(C),{modelValue:t.value.rule,"onUpdate:modelValue":a[5]||(a[5]=o=>t.value.rule=o),class:"form-item"},{default:u(()=>[e(l(m),{value:"OI",label:"OI 赛制"}),e(l(m),{value:"ACM",label:"ACM 赛制"}),e(l(m),{value:"IOI",label:"IOI 赛制"})]),_:1},8,["modelValue"])]),_:1}),e(l(i),{label:"权限"},{default:u(()=>[e(l(C),{modelValue:t.value.status,"onUpdate:modelValue":a[6]||(a[6]=o=>t.value.status=o),class:"form-item"},{default:u(()=>[e(l(m),{value:"public",label:"公开"}),e(l(m),{value:"private",label:"邀请"}),e(l(m),{value:"delete",label:"删除"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),e(d,{type:"primary",onClick:s},{default:u(()=>a[9]||(a[9]=[O(" 保存 ")])),_:1})])}}}),S=k(Q,[["__scopeId","data-v-77d0c008"]]),W={},X={class:"editor-container"};function j(v,t){return r(),_("div",X)}const G=k(W,[["render",j]]),H={key:0,style:{height:"200px"}},Z=U({__name:"ViewContestEdit",props:{cid_str:{}},setup(v){const t=c("basic"),n=v,s=c(null),f=c(!1);async function a(){s.value=null,n.cid_str?(f.value=!0,await $({contest:parseInt(n.cid_str)}).then(V=>{s.value=V.contest}).finally(()=>{f.value=!1})):s.value={id:0,title:"",summary:"",description:"",difficulty:1,status:"private",startTime:new Date,endTime:new Date,rule:"IOI",problems:{}}}return D(()=>{a()}),(V,d)=>{const o=y("el-empty"),g=A("loading");return r(),b(P,null,{default:u(()=>[e(l(F),null,{default:u(()=>[s.value?(r(),b(l(N),{key:0,modelValue:t.value,"onUpdate:modelValue":d[2]||(d[2]=p=>t.value=p)},{default:u(()=>[e(l(I),{label:"基本信息",name:"basic"},{default:u(()=>[e(S,{modelValue:s.value,"onUpdate:modelValue":d[0]||(d[0]=p=>s.value=p)},null,8,["modelValue"])]),_:1}),e(l(I),{label:"比赛试题",name:"problemset"},{default:u(()=>[e(G,{modelValue:s.value,"onUpdate:modelValue":d[1]||(d[1]=p=>s.value=p)},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])):(r(),_(R,{key:1},[f.value?q((r(),_("div",H,null,512)),[[g,!0]]):(r(),b(o,{key:1,description:"暂无数据"}))],64))]),_:1})]),_:1})}}});export{Z as default};
