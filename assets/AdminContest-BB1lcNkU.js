import{d as B,l as v,$ as M,I as A,p as K,f as h,P as O,q as e,w as n,aF as S,K as $,c as N,h as o,aK as P,ah as _,r as p,a1 as F,o as w,e as m,aG as i,t as y,ac as x,ap as R,aH as j,af as q,aI as G,_ as H}from"./index-CDm0RDJi.js";const J={class:"contest-list"},L={class:"toolbar"},Q=B({__name:"AdminContest",setup(W){F();const b=v([]),f=v(!1),u=M({current:1,size:50,total:0}),d=v({status:"",rule:"",keyword:""}),V=l=>{const t=new Date;return t<l.startTime?"未开始":t>l.endTime?"已结束":"进行中"},k=l=>{const t=new Date;return t<l.startTime?"info":t>l.endTime?"":"success"},s=async()=>{f.value=!0;try{const l=await P({page:u.current,filter:{}});b.value=l.contests,u.total=l.total}catch{_.error("获取比赛列表失败")}finally{f.value=!1}},T=()=>{},I=l=>{},z=l=>{G.confirm(`确定删除比赛 "${l.title}"?`,"提示",{type:"warning"}).then(async()=>{try{_.success("删除成功"),s()}catch{_.error("删除失败")}})};return A(()=>{s()}),(l,t)=>{const c=p("el-button"),r=p("el-option"),C=p("el-select"),D=p("el-input"),E=p("el-tag"),U=$("loading");return w(),K("div",J,[h("div",L,[e(c,{type:"primary",onClick:T},{default:n(()=>t[4]||(t[4]=[m("创建比赛")])),_:1}),e(C,{modelValue:d.value.status,"onUpdate:modelValue":t[0]||(t[0]=a=>d.value.status=a),placeholder:"比赛状态",clearable:"",style:{width:"120px","margin-left":"10px"},onChange:s},{default:n(()=>[e(r,{label:"全部",value:""}),e(r,{label:"未开始",value:"pending"}),e(r,{label:"进行中",value:"running"}),e(r,{label:"已结束",value:"ended"})]),_:1},8,["modelValue"]),e(C,{modelValue:d.value.rule,"onUpdate:modelValue":t[1]||(t[1]=a=>d.value.rule=a),placeholder:"比赛规则",clearable:"",style:{width:"120px","margin-left":"10px"},onChange:s},{default:n(()=>[e(r,{label:"全部",value:""}),e(r,{label:"OI",value:"OI"}),e(r,{label:"ACM",value:"ACM"}),e(r,{label:"IOI",value:"IOI"})]),_:1},8,["modelValue"]),e(D,{modelValue:d.value.keyword,"onUpdate:modelValue":t[2]||(t[2]=a=>d.value.keyword=a),placeholder:"搜索比赛",style:{width:"300px","margin-left":"10px"},clearable:"",onClear:s,onKeyup:S(s,["enter"])},{append:n(()=>[e(c,{icon:"search",onClick:s})]),_:1},8,["modelValue"])]),O((w(),N(o(j),{data:b.value,border:"",style:{width:"100%","margin-top":"20px"}},{default:n(()=>[e(o(i),{prop:"id",label:"ID",width:"80"}),e(o(i),{prop:"title",label:"比赛名称","min-width":"200"}),e(o(i),{label:"状态",width:"100"},{default:n(({row:a})=>[e(E,{type:k(a)},{default:n(()=>[m(y(V(a)),1)]),_:2},1032,["type"])]),_:1}),e(o(i),{label:"时间",width:"240"},{default:n(({row:a})=>[h("div",null,y(o(x)(a.startTime))+" ~ "+y(o(x)(a.endTime)),1)]),_:1}),e(o(i),{prop:"rule",label:"规则",width:"100"}),e(o(i),{label:"难度",width:"150"},{default:n(({row:a})=>[e(o(R),{modelValue:a.difficulty,"onUpdate:modelValue":g=>a.difficulty=g,disabled:"",max:5,"text-color":"#ff9900"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(o(i),{label:"操作",width:"180",fixed:"right"},{default:n(({row:a})=>[e(c,{link:"",type:"primary",size:"small",onClick:g=>I(a)},{default:n(()=>t[5]||(t[5]=[m("编辑")])),_:2},1032,["onClick"]),e(c,{link:"",type:"danger",size:"small",onClick:g=>z(a)},{default:n(()=>t[6]||(t[6]=[m("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[U,f.value]]),e(o(q),{"current-page":u.current,"onUpdate:currentPage":t[3]||(t[3]=a=>u.current=a),"page-size":u.size,"page-sizes":[10,20,50,100],total:u.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:s,onCurrentChange:s},null,8,["current-page","page-size","total"])])}}}),Y=H(Q,[["__scopeId","data-v-c756f7ac"]]);export{Y as default};
