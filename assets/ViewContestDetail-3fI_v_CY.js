import{e as $,K as y,ab as x,f as m,o as e,k as t,a9 as P,p as w,P as I,r as D,T as E,s as c,h as o,x as g,y as j,j as S,g as V,t as C,v as n,w as d,am as L,X as N,aF as O,_ as T,aa as B,F as U,aj as R,ak as q,U as z,V as A,W as h}from"./index-DTUDYeuU.js";import{_ as J,C as K}from"./ContestSidebar-BlTjrq9k.js";import"./markdown-O7Rz5C9z.js";const M=$({__name:"ContestOverview",setup(f){const a=y(()=>x().currentContest);return(s,l)=>a.value?(e(),m(J,{key:0,content:a.value.description},null,8,["content"])):(e(),m(t(P),{key:1,description:"比赛不存在"}))}}),W={key:0,class:"problemset"},X={class:"label"},G={class:"title"},H={class:"acceptance"},Q={class:"accept-number"},Y={class:"acceptance-bar-container"},Z={key:0,style:{height:"200px"}},ee=$({__name:"ContestProblems",setup(f){const a=x(),s=y(()=>a.currentContest),l=w({}),_=w(!1);function v(){s.value&&(_.value=!0,l.value={},O({contest:s.value.id}).then(p=>{p.problems.sort((r,i)=>r.id-i.id);for(const r of p.problems){const i=a.getLabel(r.id);i!==null&&(l.value[i]=r)}}).finally(()=>{_.value=!1}))}return I(()=>{v()}),(p,r)=>{const i=D("router-link"),b=E("loading");return s.value&&Object.keys(l.value).length>0?(e(),c("table",W,[r[0]||(r[0]=o("colgroup",null,[o("col",{class:"col-label"}),o("col",{class:"col-title"}),o("col",{class:"col-acceptance"})],-1)),o("tbody",null,[(e(!0),c(g,null,j(l.value,(u,k)=>(e(),c("tr",{class:"entry",key:u.id},[o("td",X,[k?(e(),c(g,{key:0},[V(C(k),1)],64)):S("",!0)]),o("td",G,[n(i,{to:`/contest/${s.value.id}/${k}`,class:"problem-title"},{default:d(()=>[V(C(u.title["en-US"]),1)]),_:2},1032,["to"])]),o("td",H,[o("span",Q,C(u.countCorrect)+" / "+C(u.countTotal),1),o("div",Y,[o("div",{class:"acceptance-bar",style:L({width:`${u.countTotal?100*u.countCorrect/u.countTotal:0}%`})},null,4)])])]))),128))])])):(e(),c(g,{key:1},[_.value?N((e(),c("div",Z,null,512)),[[b,!0]]):(e(),m(t(P),{key:1,description:"暂无试题"}))],64))}}}),te=T(ee,[["__scopeId","data-v-ab55fa7d"]]),se={};function oe(f,a){return e(),c("div")}const ne=T(se,[["render",oe]]),ae={key:0,class:"toolbar"},le=$({__name:"ContestToolbar",setup(f){const a=B(),s=x(),l=y(()=>s.currentContest);return(_,v)=>t(s).loading?S("",!0):(e(),c("div",ae,[l.value?(e(),m(t(U),{key:0,icon:t(R),class:"tool-icon",onClick:v[0]||(v[0]=p=>t(a).push(`/contest/${l.value.id}/edit`))},null,8,["icon"])):S("",!0)]))}}),ce=T(le,[["__scopeId","data-v-6e59ed6d"]]),re={key:0,style:{height:"200px"}},ie=$({__name:"ViewContestDetail",props:{cid_str:{}},setup(f){const a=f,s=x(),l=B(),_=y(()=>s.currentContest),v=y(()=>s.loading),p=w("overview"),r=(i,b)=>{i.paneName==="ranking"&&(b.preventDefault(),l.push(`/contest/${_.value.id}/ranklist`))};return(i,b)=>{const u=D("el-empty"),k=E("loading");return e(),m(q,{bread:[{label:"Reisen Online Judge",to:{name:"home"}},{label:"比赛列表",to:{name:"contest-list"}},{label:`#${a.cid_str}`}]},{main:d(()=>[n(ce),n(t(z),null,{default:d(()=>[_.value?(e(),m(t(A),{key:0,modelValue:p.value,"onUpdate:modelValue":b[0]||(b[0]=F=>p.value=F),class:"contest-tabs",onTabClick:r},{default:d(()=>[n(t(h),{label:"比赛详情",name:"overview"},{default:d(()=>[n(M)]),_:1}),n(t(h),{label:"题目列表",name:"problems"},{default:d(()=>[n(te)]),_:1}),n(t(h),{label:"我的提交",name:"submissions"},{default:d(()=>[n(ne)]),_:1}),n(t(h),{label:"排行榜",name:"ranking"})]),_:1},8,["modelValue"])):(e(),c(g,{key:1},[v.value?N((e(),c("div",re,null,512)),[[k,!0]]):(e(),m(u,{key:1,description:"暂无数据"}))],64))]),_:1})]),sidebar:d(()=>[n(K)]),_:1},8,["bread"])}}}),pe=T(ie,[["__scopeId","data-v-c75ada6f"]]);export{pe as default};
