import{i as j,b as G,a as H,d as x,m as J,u as z,r as $,c as y,o as v,w as o,e as _,f as E,g as O,t as N,h as e,F as A,j as q,_ as F,k as R,l as C,n as K,p as V,q as l,s as U,v as L,E as D,x as P,y as X,z as b,A as k,B as S,C as Q,D as c,G as W,H as Y,I as Z,L as h,J as ee,K as le,M as ae,N as te,O as B,P as ue}from"./index-CDm0RDJi.js";import{_ as oe}from"./MdEditor.vue_vue_type_script_setup_true_lang-L9j_hauY.js";import"./markdown-B4gdZ8Sn.js";var ne=Array.prototype,de=ne.splice;function se(m,r){for(var t=m?r.length:0,a=t-1;t--;){var u=r[t];if(t==a||u!==n){var n=u;j(u)?de.call(m,u,1):G(m,u)}}return m}function ie(m,r){var t=[];if(!(m&&m.length))return t;var a=-1,u=[],n=m.length;for(r=H(r);++a<n;){var p=m[a];r(p,a,m)&&(t.push(p),u.push(a))}return se(m,u),t}const me={class:"label-container"},re=x({__name:"ProblemEditPart",props:J({label:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(m){const r=z(m,"modelValue");return(t,a)=>{const u=$("el-button"),n=$("el-form-item");return v(),y(n,null,{label:o(()=>[E("div",me,[_(N(t.label)+" ",1),r.value!==void 0?(v(),y(e(A),{key:0,icon:e(q),onClick:a[0]||(a[0]=p=>r.value=void 0)},null,8,["icon"])):O("",!0)])]),default:o(()=>[r.value!==void 0?(v(),y(oe,{key:0,class:"editor",modelValue:r.value,"onUpdate:modelValue":a[1]||(a[1]=p=>r.value=p)},null,8,["modelValue"])):(v(),y(u,{key:1,type:"primary",onClick:a[2]||(a[2]=p=>r.value="")},{default:o(()=>a[3]||(a[3]=[_("创建")])),_:1}))]),_:1})}}}),I=F(re,[["__scopeId","data-v-2ae1d641"]]),ve={class:"editor-container"},pe={class:"lang-select-container"},fe={class:"example-container"},Ve=x({__name:"ProblemEditContent",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(m){const r=R(),t=z(m,"modelValue"),a=C(void 0),u=C(void 0),n=C(void 0);function p(){a.value&&(u.value={examples:[]})}function i(){a.value&&(delete t.value.title[a.value],delete t.value.statements[a.value],u.value=t.value.statements[a.value])}function T(){!a.value||n.value===void 0||u.value===void 0||(t.value.title[a.value]=n.value,t.value.statements[a.value]=Q(u.value))}function M(f){u.value&&ie(u.value.examples,(d,s)=>s===f)}return K(a,()=>{a.value&&(u.value=t.value.statements[a.value])}),(f,d)=>(v(),V("div",ve,[E("div",pe,[l(e(D),{modelValue:a.value,"onUpdate:modelValue":d[0]||(d[0]=s=>a.value=s),style:{width:"150px","margin-right":"1em"}},{default:o(()=>[(v(!0),V(U,null,L(e(r).config.userLangs,(s,g)=>(v(),y(e(c),{key:g,value:g,label:s.description},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]),a.value?(v(),y(e(P),{key:0,type:"danger",onClick:i},{default:o(()=>d[8]||(d[8]=[_(" 删除 ")])),_:1})):O("",!0)]),l(e(X)),a.value?(v(),V(U,{key:0},[u.value?(v(),V(U,{key:0},[l(e(S),{"label-width":100,"label-position":"left"},{default:o(()=>[l(e(b),{label:"标题"},{default:o(()=>[l(e(k),{modelValue:n.value,"onUpdate:modelValue":d[1]||(d[1]=s=>n.value=s)},null,8,["modelValue"])]),_:1}),l(I,{label:"题目背景",modelValue:u.value.background,"onUpdate:modelValue":d[2]||(d[2]=s=>u.value.background=s)},null,8,["modelValue"]),l(I,{label:"输入格式",modelValue:u.value.formatI,"onUpdate:modelValue":d[3]||(d[3]=s=>u.value.formatI=s)},null,8,["modelValue"]),l(I,{label:"输出格式",modelValue:u.value.formatO,"onUpdate:modelValue":d[4]||(d[4]=s=>u.value.formatO=s)},null,8,["modelValue"]),(v(!0),V(U,null,L(u.value.examples,(s,g)=>(v(),y(e(b),{key:g},{label:o(()=>[E("div",null,[_(N(`样例组 #${g+1}`)+" ",1),l(e(A),{icon:e(q),onClick:w=>M(g)},null,8,["icon","onClick"])])]),default:o(()=>[E("div",fe,[l(e(k),{type:"textarea",modelValue:s.dataI,"onUpdate:modelValue":w=>s.dataI=w,autosize:{minRows:5,maxRows:10},resize:"none"},null,8,["modelValue","onUpdate:modelValue"]),l(e(k),{type:"textarea",modelValue:s.dataO,"onUpdate:modelValue":w=>s.dataO=w,autosize:{minRows:5,maxRows:10},resize:"none"},null,8,["modelValue","onUpdate:modelValue"])])]),_:2},1024))),128)),l(e(b),null,{default:o(()=>[l(e(P),{type:"primary",plain:"",onClick:d[5]||(d[5]=s=>u.value.examples.push({dataI:"",dataO:""}))},{default:o(()=>d[9]||(d[9]=[_("新建样例")])),_:1})]),_:1}),l(I,{label:"提示",modelValue:u.value.hint,"onUpdate:modelValue":d[6]||(d[6]=s=>u.value.hint=s)},null,8,["modelValue"])]),_:1}),l(e(P),{type:"primary",onClick:T},{default:o(()=>d[10]||(d[10]=[_(" 保存 ")])),_:1})],64)):(v(),V(U,{key:1},[l(e(S),null,{default:o(()=>[l(e(b),{label:"标题"},{default:o(()=>[l(e(k),{modelValue:n.value,"onUpdate:modelValue":d[7]||(d[7]=s=>n.value=s)},null,8,["modelValue"])]),_:1})]),_:1}),l(e(P),{type:"primary",onClick:p},{default:o(()=>d[11]||(d[11]=[_(" 创建 ")])),_:1})],64))],64)):O("",!0)]))}}),be=F(Ve,[["__scopeId","data-v-43bbc98b"]]),_e={class:"basic-container"},ye=x({__name:"ProblemEditBasic",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(m){const{difficulties:r}=R().config,t=z(m,"modelValue");function a(){}return(u,n)=>{const p=$("el-button");return v(),V("div",_e,[l(e(S),{modelValue:t.value,"onUpdate:modelValue":n[5]||(n[5]=i=>t.value=i),style:{"max-width":"200px"}},{default:o(()=>[l(e(b),{label:"时间限制"},{default:o(()=>[l(e(k),{modelValue:t.value.limitTime,"onUpdate:modelValue":n[0]||(n[0]=i=>t.value.limitTime=i)},null,8,["modelValue"])]),_:1}),l(e(b),{label:"空间限制"},{default:o(()=>[l(e(k),{modelValue:t.value.limitTime,"onUpdate:modelValue":n[1]||(n[1]=i=>t.value.limitTime=i)},null,8,["modelValue"])]),_:1}),l(e(b),{label:"可见状态"},{default:o(()=>[l(e(D),{modelValue:t.value.status,"onUpdate:modelValue":n[2]||(n[2]=i=>t.value.status=i)},{default:o(()=>[l(e(c),{value:"public",label:"公开"}),l(e(c),{value:"contest",label:"比赛"}),l(e(c),{value:"private",label:"隐藏"})]),_:1},8,["modelValue"])]),_:1}),l(e(b),{label:"题目类型"},{default:o(()=>[l(e(D),{modelValue:t.value.type,"onUpdate:modelValue":n[3]||(n[3]=i=>t.value.type=i)},{default:o(()=>[l(e(c),{value:"traditional",label:"传统"}),l(e(c),{value:"interactive",label:"交互"})]),_:1},8,["modelValue"])]),_:1}),l(e(b),{label:"题目难度"},{default:o(()=>[l(e(k),{modelValue:t.value.difficulty,"onUpdate:modelValue":n[4]||(n[4]=i=>t.value.difficulty=i)},null,8,["modelValue"])]),_:1}),l(e(b),{label:"标签设置"})]),_:1},8,["modelValue"]),l(p,{type:"primary",onClick:a},{default:o(()=>n[6]||(n[6]=[_(" 保存 ")])),_:1})])}}}),ke=F(ye,[["__scopeId","data-v-3fed033a"]]),ge={class:"testdata-container"},Ue=x({__name:"ProblemEditTestdata",setup(m){return(r,t)=>(v(),V("div",ge,[l(e(Y),{class:"upload-testdata",drag:"",multiple:""},{tip:o(()=>t[0]||(t[0]=[_(" 数据包大小不超过 200MB。 ")])),default:o(()=>[l(e(A),{icon:e(W)},null,8,["icon"]),t[1]||(t[1]=_(" 将数据包拖拽至此处，或者")),t[2]||(t[2]=E("em",null,"点击上传",-1))]),_:1})]))}}),ce={key:0,style:{height:"200px"}},we=x({__name:"ViewProblemEdit",props:{pid:{}},setup(m){const r=C("basic"),t=m,a=C(null),u=C(!1);async function n(){a.value=null,t.pid?(u.value=!0,await ee({problem:t.pid}).then(p=>{a.value=p.problem}).finally(()=>{u.value=!1})):a.value={id:"",type:"traditional",statements:{},status:"private",limitTime:0,limitMemory:0,countCorrect:0,countTotal:0,difficulty:0,tags:[],title:{}}}return Z(()=>{n()}),(p,i)=>{const T=$("el-empty"),M=le("loading");return v(),y(h,null,{default:o(()=>[l(e(ae),null,{default:o(()=>[a.value?(v(),y(e(te),{key:0,modelValue:r.value,"onUpdate:modelValue":i[3]||(i[3]=f=>r.value=f)},{default:o(()=>[l(e(B),{label:"基本信息",name:"basic"},{default:o(()=>[l(ke,{modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=f=>a.value=f)},null,8,["modelValue"])]),_:1}),l(e(B),{label:"题面编辑",name:"statement"},{default:o(()=>[l(be,{modelValue:a.value,"onUpdate:modelValue":i[1]||(i[1]=f=>a.value=f)},null,8,["modelValue"])]),_:1}),l(e(B),{label:"数据上传",name:"testdata"},{default:o(()=>[l(Ue,{modelValue:a.value,"onUpdate:modelValue":i[2]||(i[2]=f=>a.value=f)},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])):(v(),V(U,{key:1},[u.value?ue((v(),V("div",ce,null,512)),[[M,!0]]):(v(),y(T,{key:1,description:"暂无数据"}))],64))]),_:1})]),_:1})}}});export{we as default};
