import{e as g,K as b,ab as $,f as p,o as e,k as t,a9 as P,p as w,P as F,r as D,T as E,s as i,h as a,x as h,y as I,j as S,g as V,t as y,v as l,w as _,am as j,X as N,aF as L,_ as x,aa as B,F as U,aj as O,ak as q,U as z,V as A,W as C}from"./index-SVFsH89c.js";import{_ as K,C as M}from"./ContestSidebar-DBBe9pg8.js";import"./markdown-DVG_2iTS.js";const R=g({__name:"ContestOverview",setup(k){const s=b(()=>$().currentContest);return(c,o)=>s.value?(e(),p(K,{key:0,content:s.value.description},null,8,["content"])):(e(),p(t(P),{key:1,description:"比赛不存在"}))}}),W={key:0,class:"problemset"},X={class:"label"},G={class:"title"},H={class:"acceptance"},J={class:"accept-number"},Q={class:"acceptance-bar-container"},Y={key:0,style:{height:"200px"}},Z=g({__name:"ContestProblems",setup(k){const s=$(),c=b(()=>s.currentContest),o=w({}),m=w(!1);function d(){c.value&&(m.value=!0,o.value={},L({contest:c.value.id}).then(v=>{v.problems.sort((r,n)=>r.id-n.id);for(const r of v.problems){const n=s.getLabel(r.id);n!==null&&(o.value[n]=r)}}).finally(()=>{m.value=!1}))}return F(()=>{d()}),(v,r)=>{const n=D("router-link"),T=E("loading");return c.value&&Object.keys(o.value).length>0?(e(),i("table",W,[r[0]||(r[0]=a("colgroup",null,[a("col",{class:"col-label"}),a("col",{class:"col-title"}),a("col",{class:"col-acceptance"})],-1)),a("tbody",null,[(e(!0),i(h,null,I(o.value,(u,f)=>(e(),i("tr",{class:"entry",key:u.id},[a("td",X,[f?(e(),i(h,{key:0},[V(y(f),1)],64)):S("",!0)]),a("td",G,[l(n,{to:`/contest/${c.value.id}/${f}`,class:"problem-title"},{default:_(()=>[V(y(u.title["en-US"]),1)]),_:2},1032,["to"])]),a("td",H,[a("span",J,y(u.countCorrect)+" / "+y(u.countTotal),1),a("div",Q,[a("div",{class:"acceptance-bar",style:j({width:`${u.countTotal?100*u.countCorrect/u.countTotal:0}%`})},null,4)])])]))),128))])])):(e(),i(h,{key:1},[m.value?N((e(),i("div",Y,null,512)),[[T,!0]]):(e(),p(t(P),{key:1,description:"暂无试题"}))],64))}}}),ee=x(Z,[["__scopeId","data-v-ab55fa7d"]]),te={};function se(k,s){return e(),i("div")}const oe=x(te,[["render",se]]),ne={key:0,class:"toolbar"},ae=g({__name:"ContestToolbar",setup(k){const s=B(),c=$(),o=b(()=>c.currentContest);return(m,d)=>t(c).loading?S("",!0):(e(),i("div",ne,[o.value?(e(),p(t(U),{key:0,icon:t(O),class:"tool-icon",onClick:d[0]||(d[0]=v=>t(s).push(`/contest/${o.value.id}/edit`))},null,8,["icon"])):S("",!0)]))}}),le=x(ae,[["__scopeId","data-v-6e59ed6d"]]),ce={key:0,style:{height:"200px"}},re=g({__name:"ViewContestDetail",setup(k){const s=$(),c=B(),o=b(()=>s.currentContest),m=b(()=>s.loading),d=w("overview"),v=(r,n)=>{r.paneName==="ranking"&&(n.preventDefault(),c.push(`/contest/${o.value.id}/ranklist`))};return(r,n)=>{const T=D("el-empty"),u=E("loading");return e(),p(q,null,{main:_(()=>[l(le),l(t(z),null,{default:_(()=>[o.value?(e(),p(t(A),{key:0,modelValue:d.value,"onUpdate:modelValue":n[0]||(n[0]=f=>d.value=f),class:"contest-tabs",onTabClick:v},{default:_(()=>[l(t(C),{label:"比赛详情",name:"overview"},{default:_(()=>[l(R)]),_:1}),l(t(C),{label:"题目列表",name:"problems"},{default:_(()=>[l(ee)]),_:1}),l(t(C),{label:"我的提交",name:"submissions"},{default:_(()=>[l(oe)]),_:1}),l(t(C),{label:"排行榜",name:"ranking"})]),_:1},8,["modelValue"])):(e(),i(h,{key:1},[m.value?N((e(),i("div",ce,null,512)),[[u,!0]]):(e(),p(T,{key:1,description:"暂无数据"}))],64))]),_:1})]),sidebar:_(()=>[l(M)]),_:1})}}}),de=x(re,[["__scopeId","data-v-efa5f649"]]);export{de as default};
