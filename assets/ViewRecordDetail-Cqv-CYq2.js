import{e as D,n as R,p as v,q as P,T as N,s as r,o as l,v as i,w as n,x as E,k as t,W as T,f as $,h as e,N as U,t as a,a9 as w,y as j,ak as q,j as y,a2 as C,X as S,V as A,al as F,am as h,an as W,g as k,ao as X,_ as I,aa as G,ap as B,a1 as H,U as L,z as J,P as K,aq as O,aj as Q}from"./index-DrYKQVxV.js";const Y={class:"submission-detail-main"},Z={key:0,class:"compile-info"},x={class:"compile-message"},ee={class:"testcase-container"},se=["onClick"],te={class:"testcase-id"},ae={class:"testcase-verdict"},oe={class:"testcase-meta"},le={key:0},ie={key:1},de={class:"code-container"},ne={class:"code-meta"},re={class:"code-content"},ce={key:0,style:{height:"300px"}},ue={key:0,class:"testcase-detail"},pe={class:"details"},me={class:"testcase-data"},ve={class:"testcase-data"},_e={class:"testcase-data"},be=D({__name:"RecordMain",props:{record:{},loading:{type:Boolean}},setup(_){const{verdicts:b,codeLangs:f}=R().config,m=_,u=v("testcases"),o=v(!1),s=v(null),g=v(0);function M(d,c){s.value=d,g.value=c,o.value=!0}return P(()=>m.loading,()=>{var d;m.record&&((d=m.record.compile)!=null&&d.success)?u.value="testcases":u.value="compile"}),(d,c)=>{const z=N("loading");return l(),r("div",Y,[i(t(A),{modelValue:u.value,"onUpdate:modelValue":c[0]||(c[0]=p=>u.value=p),class:"detail-tabs"},{default:n(()=>[d.record?(l(),r(E,{key:0},[i(t(T),{label:"编译信息",name:"compile"},{default:n(()=>[d.record.compile?(l(),r("div",Z,[i(t(U),{type:d.record.compile.success?"success":"error",title:d.record.compile.success?"编译成功":"编译错误",closable:!1},null,8,["type","title"]),e("pre",x,a(d.record.compile.message),1)])):(l(),$(t(w),{key:1,description:"暂无编译信息"}))]),_:1}),i(t(T),{label:"测试点",name:"testcases"},{default:n(()=>[e("div",ee,[(l(!0),r(E,null,j(d.record.detail,(p,V)=>(l(),r("div",{key:V,class:"testcase-item"},[e("div",{class:"testcase-badge",style:q({backgroundColor:`${t(b)[p.verdict].color}`}),onClick:Ae=>M(p,V)},[e("span",te,"#"+a(V+1),1),e("span",ae,a(t(b)[p.verdict].abbr),1),e("span",oe,[p.time!==void 0?(l(),r("span",le,a(p.time)+"ms",1)):y("",!0),p.memory!==void 0?(l(),r("span",ie,a(t(C)(p.memory)),1)):y("",!0)])],12,se)]))),128))])]),_:1}),i(t(T),{label:"代码",name:"code"},{default:n(()=>[e("div",de,[e("div",ne,[e("span",null,"语言: "+a(t(f)[d.record.lang].description),1),e("span",null,"代码长度: "+a(d.record.length)+" bytes",1)]),e("pre",re,[e("code",null,a(d.record.code),1)])])]),_:1})],64)):(l(),r(E,{key:1},[d.loading?S((l(),r("div",ce,null,512)),[[z,!0]]):(l(),$(t(w),{key:1,description:"未查询到记录"}))],64))]),_:1},8,["modelValue"]),i(t(X),{modelValue:o.value,"onUpdate:modelValue":c[1]||(c[1]=p=>o.value=p),title:`测试点 #${g.value+1} 详情`,width:"800"},{default:n(()=>[s.value?(l(),r("div",ue,[i(t(F),{column:4,border:""},{default:n(()=>[i(t(h),{label:"状态"},{default:n(()=>[i(W,{verdict:s.value.verdict},null,8,["verdict"])]),_:1}),i(t(h),{label:"用时"},{default:n(()=>[k(a(s.value.time)+"ms",1)]),_:1}),i(t(h),{label:"内存"},{default:n(()=>[k(a(t(C)(s.value.memory)),1)]),_:1}),s.value.score!==void 0?(l(),$(t(h),{key:0,label:"得分"},{default:n(()=>[k(a(s.value.score)+"分 ",1)]),_:1})):y("",!0)]),_:1}),e("div",pe,[c[2]||(c[2]=e("h3",null,"输入摘要",-1)),e("pre",me,a(s.value.input),1),c[3]||(c[3]=e("h3",null,"输出摘要",-1)),e("pre",ve,a(s.value.output),1),c[4]||(c[4]=e("h3",null,"校验信息",-1)),e("pre",_e,a(s.value.checker),1)])])):y("",!0)]),_:1},8,["modelValue","title"])])}}}),fe=I(be,[["__scopeId","data-v-d894a4f0"]]),ge={class:"panel-container"},ye={key:0,class:"description-list"},he={class:"description-item"},$e={class:"item-value"},ke={class:"description-item"},Ve={class:"item-value"},Ee={class:"description-item"},Te={class:"item-value"},Ce={class:"description-item"},De={class:"item-value"},we={class:"description-item"},Be={class:"item-value"},Re={class:"description-item"},Ne={class:"item-value"},Se={class:"description-item"},Ie={class:"item-value"},Le={class:"description-item"},Me={class:"item-value"},ze={class:"description-item"},Pe={class:"item-value"},Ue={key:1,style:{height:"288px"}},je=D({__name:"RecordSidebar",props:{record:{},loading:{type:Boolean}},setup(_){const{codeLangs:b}=R().config,f=G(),m=()=>{u.record&&f.push(`/problem/${u.record.problem.id}`)},u=_;return(o,s)=>{const g=N("loading");return l(),r("div",ge,[i(t(L),null,{default:n(()=>[s[9]||(s[9]=e("h3",null,"评测详情",-1)),o.record?(l(),r("div",ye,[e("div",he,[s[0]||(s[0]=e("span",{class:"item-label"},"编号",-1)),e("span",$e,a(o.record.id),1)]),e("div",ke,[s[1]||(s[1]=e("span",{class:"item-label"},"提交用户",-1)),e("span",Ve,a(o.record.user.name),1)]),e("div",Ee,[s[2]||(s[2]=e("span",{class:"item-label"},"关联试题",-1)),e("span",Te,a(o.record.problem.title["zh-CN"]),1)]),e("div",Ce,[s[3]||(s[3]=e("span",{class:"item-label"},"提交时间",-1)),e("span",De,a(t(B)(o.record.submission)),1)]),e("div",we,[s[4]||(s[4]=e("span",{class:"item-label"},"评测时间",-1)),e("span",Be,a(t(B)(o.record.evaluation)),1)]),e("div",Re,[s[5]||(s[5]=e("span",{class:"item-label"},"最终用时",-1)),e("span",Ne,a(t(H)(o.record.time)),1)]),e("div",Se,[s[6]||(s[6]=e("span",{class:"item-label"},"评测空间",-1)),e("span",Ie,a(t(C)(o.record.memory)),1)]),e("div",Le,[s[7]||(s[7]=e("span",{class:"item-label"},"代码长度",-1)),e("span",Me,a(o.record.length),1)]),e("div",ze,[s[8]||(s[8]=e("span",{class:"item-label"},"评测语言",-1)),e("span",Pe,a(t(b)[o.record.lang].description),1)])])):S((l(),r("div",Ue,null,512)),[[g,o.loading]])]),_:1}),i(t(J),{type:"primary",onClick:m,disabled:!o.record},{default:n(()=>s[10]||(s[10]=[k(" 查看试题 ")])),_:1},8,["disabled"])])}}}),qe=I(je,[["__scopeId","data-v-ad1396b3"]]),We=D({__name:"ViewRecordDetail",props:{rid_str:{}},setup(_){const f=parseInt(_.rid_str),m=v(null),u=v(!0);return K(()=>{O({id:f}).then(o=>{m.value=o.record}).finally(()=>{u.value=!1})}),(o,s)=>(l(),$(Q,null,{main:n(()=>[i(t(L),null,{default:n(()=>[i(fe,{record:m.value,loading:u.value},null,8,["record","loading"])]),_:1})]),sidebar:n(()=>[i(qe,{record:m.value,loading:u.value},null,8,["record","loading"])]),_:1}))}});export{We as default};
