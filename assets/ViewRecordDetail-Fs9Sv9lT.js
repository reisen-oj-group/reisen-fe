import{d as T,k as B,l as v,K as w,p as n,o as l,q as i,w as d,s as V,h as a,O as C,c as h,f as e,a7 as P,t as o,Z as R,v as U,a8 as q,g,S as D,P as I,N as z,a9 as A,aa as y,ab as F,e as $,a0 as K,_ as M,a1 as O,ac as S,R as Z,M as N,x as j,I as G,ad as H,a6 as J}from"./index-CDm0RDJi.js";const Q={class:"submission-detail-main"},W={key:0,class:"compile-info"},X={class:"compile-message"},Y={class:"testcase-container"},x=["onClick"],ee={class:"testcase-id"},se={class:"testcase-verdict"},te={class:"testcase-meta"},ae={key:0},oe={key:1},le={class:"code-container"},ie={class:"code-meta"},de={class:"code-content"},ne={key:0,style:{height:"300px"}},re={key:0,class:"testcase-detail"},ce={class:"details"},ue={class:"testcase-data"},pe={class:"testcase-data"},me={class:"testcase-data"},ve=T({__name:"RecordMain",props:{record:{},loading:{type:Boolean}},setup(f){const{verdicts:_,codeLangs:b}=B().config,m=v("testcases"),p=v(!1),s=v(null),t=v(0);function k(r,c){s.value=r,t.value=c,p.value=!0}return(r,c)=>{const L=w("loading");return l(),n("div",Q,[i(a(z),{modelValue:m.value,"onUpdate:modelValue":c[0]||(c[0]=u=>m.value=u),class:"detail-tabs"},{default:d(()=>[r.record?(l(),n(V,{key:0},[i(a(C),{label:"编译信息",name:"compile"},{default:d(()=>[r.record.compile?(l(),n("div",W,[i(a(P),{type:r.record.verdict==="CE"?"error":"success",title:r.record.verdict==="CE"?"编译错误":"编译成功",closable:!1},null,8,["type","title"]),e("pre",X,o(r.record.compile.message),1)])):(l(),h(a(R),{key:1,description:"暂无编译信息"}))]),_:1}),i(a(C),{label:"测试点",name:"testcases"},{default:d(()=>[e("div",Y,[(l(!0),n(V,null,U(r.record.detail,(u,E)=>(l(),n("div",{key:E,class:"testcase-item"},[e("div",{class:"testcase-badge",style:q({backgroundColor:`${a(_)[u.verdict].color}`}),onClick:ze=>k(u,E)},[e("span",ee,"#"+o(E+1),1),e("span",se,o(a(_)[u.verdict].abbr),1),e("span",te,[u.time?(l(),n("span",ae,o(u.time)+"ms",1)):g("",!0),u.memory?(l(),n("span",oe,o(a(D)(u.memory)),1)):g("",!0)])],12,x)]))),128))])]),_:1}),i(a(C),{label:"代码",name:"code"},{default:d(()=>[e("div",le,[e("div",ie,[e("span",null,"语言: "+o(a(b)[r.record.lang].description),1),e("span",null,"代码长度: "+o(r.record.length)+" bytes",1)]),e("pre",de,[e("code",null,o(r.record.code),1)])])]),_:1})],64)):(l(),n(V,{key:1},[r.loading?I((l(),n("div",ne,null,512)),[[L,!0]]):(l(),h(a(R),{key:1,description:"未查询到记录"}))],64))]),_:1},8,["modelValue"]),i(a(K),{modelValue:p.value,"onUpdate:modelValue":c[1]||(c[1]=u=>p.value=u),title:`测试点 #${t.value+1} 详情`,width:"800"},{default:d(()=>[s.value?(l(),n("div",re,[i(a(A),{column:4,border:""},{default:d(()=>[i(a(y),{label:"状态"},{default:d(()=>[i(F,{verdict:s.value.verdict},null,8,["verdict"])]),_:1}),i(a(y),{label:"用时"},{default:d(()=>[$(o(s.value.time)+"ms",1)]),_:1}),i(a(y),{label:"内存"},{default:d(()=>[$(o(a(D)(s.value.memory)),1)]),_:1}),s.value.score!==void 0?(l(),h(a(y),{key:0,label:"得分"},{default:d(()=>[$(o(s.value.score)+"分 ",1)]),_:1})):g("",!0)]),_:1}),e("div",ce,[c[2]||(c[2]=e("h3",null,"输入摘要",-1)),e("pre",ue,o(s.value.input),1),c[3]||(c[3]=e("h3",null,"输出摘要",-1)),e("pre",pe,o(s.value.output),1),c[4]||(c[4]=e("h3",null,"校验信息",-1)),e("pre",me,o(s.value.checker),1)])])):g("",!0)]),_:1},8,["modelValue","title"])])}}}),_e=M(ve,[["__scopeId","data-v-242584b6"]]),be={class:"panel-container"},fe={key:0,class:"description-list"},ge={class:"description-item"},ye={class:"item-value"},he={class:"description-item"},$e={class:"item-value"},ke={class:"description-item"},Ee={class:"item-value"},Ve={class:"description-item"},Ce={class:"item-value"},De={class:"description-item"},Te={class:"item-value"},Re={class:"description-item"},Se={class:"item-value"},Be={class:"description-item"},we={class:"item-value"},Ie={class:"description-item"},Me={class:"item-value"},Ne={class:"description-item"},Le={class:"item-value"},Pe={key:1,style:{height:"288px"}},Ue=T({__name:"RecordSidebar",props:{record:{},loading:{type:Boolean}},setup(f){const{codeLangs:_}=B().config,b=O(),m=()=>{p.record&&b.push(`/problem/${p.record.problem.id}`)},p=f;return(s,t)=>{const k=w("loading");return l(),n("div",be,[i(a(N),null,{default:d(()=>[t[9]||(t[9]=e("h3",null,"评测详情",-1)),s.record?(l(),n("div",fe,[e("div",ge,[t[0]||(t[0]=e("span",{class:"item-label"},"编号",-1)),e("span",ye,o(s.record.id),1)]),e("div",he,[t[1]||(t[1]=e("span",{class:"item-label"},"提交用户",-1)),e("span",$e,o(s.record.user.name),1)]),e("div",ke,[t[2]||(t[2]=e("span",{class:"item-label"},"关联试题",-1)),e("span",Ee,o(s.record.problem.title["en-US"]),1)]),e("div",Ve,[t[3]||(t[3]=e("span",{class:"item-label"},"提交时间",-1)),e("span",Ce,o(a(S)(s.record.submission)),1)]),e("div",De,[t[4]||(t[4]=e("span",{class:"item-label"},"评测时间",-1)),e("span",Te,o(a(S)(s.record.evaluation)),1)]),e("div",Re,[t[5]||(t[5]=e("span",{class:"item-label"},"最终用时",-1)),e("span",Se,o(a(Z)(s.record.time)),1)]),e("div",Be,[t[6]||(t[6]=e("span",{class:"item-label"},"评测空间",-1)),e("span",we,o(a(D)(s.record.memory)),1)]),e("div",Ie,[t[7]||(t[7]=e("span",{class:"item-label"},"代码长度",-1)),e("span",Me,o(s.record.length),1)]),e("div",Ne,[t[8]||(t[8]=e("span",{class:"item-label"},"评测语言",-1)),e("span",Le,o(a(_)[s.record.lang].description),1)])])):I((l(),n("div",Pe,null,512)),[[k,s.loading]])]),_:1}),i(a(j),{type:"primary",onClick:m,disabled:!s.record},{default:d(()=>t[10]||(t[10]=[$(" 查看试题 ")])),_:1},8,["disabled"])])}}}),qe=M(Ue,[["__scopeId","data-v-6fa579c5"]]),Fe=T({__name:"ViewRecordDetail",props:{rid_str:{}},setup(f){const b=parseInt(f.rid_str),m=v(null),p=v(!0);return G(()=>{H({id:b}).then(s=>{m.value=s.record}).finally(()=>{p.value=!1})}),(s,t)=>(l(),h(J,null,{main:d(()=>[i(a(N),null,{default:d(()=>[i(_e,{record:m.value,loading:p.value},null,8,["record","loading"])]),_:1})]),sidebar:d(()=>[i(qe,{record:m.value,loading:p.value},null,8,["record","loading"])]),_:1}))}});export{Fe as default};
