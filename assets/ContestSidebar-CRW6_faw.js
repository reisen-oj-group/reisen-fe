import{m as j}from"./markdown-Bv0KnHKH.js";import{e as $,p as k,av as z,s,o as n,aa as E,ai as L,K as x,q as N,P,aw as V,r as H,j as T,v as r,w as c,x as b,h as u,t as g,k as i,ax as I,ay as R,g as y,y as D,az as U,U as q,z as F,_ as K}from"./index-DrYKQVxV.js";const A=["innerHTML"],ne=$({__name:"MdRender",props:{content:{}},setup(h){const a=k(""),o=h;return z(()=>{j(o.content).then(e=>{a.value=e})}),(e,d)=>(n(),s("div",{class:"markdown-wrap",innerHTML:a.value},null,8,A))}}),G={key:0,class:"contest-sidebar"},J={class:"contest-info"},O={class:"contest-time"},Q={key:0},W={key:1},X={class:"problem-badges"},Y=["onClick"],Z=$({__name:"ContestSidebar",setup(h){const a=E(),o=L(),e=x(()=>o.currentContest),d=x(()=>o.currentRanking),l=k(0),m=k(1);function _(){e.value&&(l.value=Math.max(0,e.value.endTime.getTime()-Date.now()),m.value=e.value.endTime.getTime()-e.value.startTime.getTime())}N(e,_);function M(v){if(!d.value)return"";for(const t of d.value.results)if(t.problem==v)switch(t.judge){case"correct":return"status-success";case"incorrect":return"status-danger";default:return"status-warning"}return""}function B(v,t){e.value&&a.push(`/contest/${e.value.id}/${t}`)}function S(){o.exit(),a.push("/contest")}let C;return P(()=>{_(),C=window.setInterval(_,1e3)}),V(()=>{clearInterval(C)}),(v,t)=>{const p=H("router-link");return e.value?(n(),s("div",G,[r(i(q),null,{default:c(()=>[e.value?(n(),s(b,{key:0},[u("div",J,[r(p,{to:`/contest/${e.value.id}`},{default:c(()=>[u("h3",null,g(e.value.title),1)]),_:1},8,["to"]),u("div",O,[r(i(I),{percentage:100*(m.value-l.value)/m.value,"stroke-width":15,striped:"","show-text":!1},null,8,["percentage"]),u("div",null,[l.value>0?(n(),s("span",Q,"剩余时间 "+g(i(R)(l.value)),1)):(n(),s("span",W,"比赛已结束")),r(p,{class:"link-ranklist",to:`/contest/${e.value.id}/ranklist`},{default:c(()=>t[0]||(t[0]=[y(" 排行榜 ")])),_:1},8,["to"])])])]),u("div",X,[(n(!0),s(b,null,D(e.value.problems,(w,f)=>(n(),s("div",{key:f,class:U(["problem-badge",M(w)]),onClick:ee=>B(w,f)},g(f),11,Y))),128))])],64)):T("",!0)]),_:1}),r(i(F),{type:"primary",onClick:S},{default:c(()=>t[1]||(t[1]=[y("退出比赛模式")])),_:1})])):T("",!0)}}}),ae=K(Z,[["__scopeId","data-v-6331db5c"]]);export{ae as C,ne as _};
