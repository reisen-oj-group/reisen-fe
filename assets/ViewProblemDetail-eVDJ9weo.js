import{d as I,k as F,l as V,Q as L,K as R,c as f,o as a,h as e,M as q,w as u,p as d,f as o,t as _,R as j,S as G,T as J,g as v,q as n,s as P,v as z,U as M,e as g,V as O,F as $,W as D,X as U,Y as K,P as N,Z as Q,_ as B,m as W,u as X,$ as Z,r as H,a0 as x,z as S,E as ee,D as le,A as te,x as w,B as oe,a1 as T,a2 as se,a3 as ae,a4 as ne,a5 as ie,I as re,n as ue,a6 as de,J as pe}from"./index-CDm0RDJi.js";import{_ as E,C as me}from"./ContestSidebar-X_pWlScI.js";import"./markdown-B4gdZ8Sn.js";const ce={class:"problem-header"},be={class:"problem-title"},ve={class:"problem-meta"},fe={class:"time-limit"},_e={class:"memory-limit"},ye={class:"problem-type"},ge={class:"problem-content"},ke={key:0,class:"problem-section"},Ce={key:1,class:"problem-section"},he={key:2,class:"problem-section"},$e={key:3,class:"problem-section"},Ve={key:4,class:"problem-section"},we=["onClick"],Ee={key:0},Pe=["onClick"],Ie={key:0},Se={key:5,class:"problem-section"},Be={key:0,style:{height:"200px"}},Te=I({__name:"ProblemContent",props:{problem:{},loading:{type:Boolean}},setup(k){const m=k,i=F();function l(){if(m.problem!==null){const s=Object.keys(m.problem.statements);if(s.length!==0&&!(i.userLang in s))return s[0]}return i.userLang}const c=V(l()),r=L(()=>{var s;return(s=m.problem)==null?void 0:s.statements[c.value]}),p=L(()=>{var s;return((s=m.problem)==null?void 0:s.title[c.value])||"暂无题面"}),t=V(0),y=async(s,b)=>{await navigator.clipboard.writeText(b),t.value=s,setTimeout(()=>{t.value==s&&(t.value=0)},1e3)};return(s,b)=>{const A=R("loading");return a(),f(e(q),{class:"problem-container"},{default:u(()=>[s.problem&&r.value?(a(),d(P,{key:0},[o("div",ce,[o("h1",be,_(p.value||"暂无数据"),1),o("div",ve,[o("span",fe,"时间限制: "+_(e(j)(s.problem.limitTime)),1),o("span",_e,"内存限制: "+_(e(G)(s.problem.limitMemory)),1),o("span",ye,_(e(J)(s.problem.type)),1)])]),o("div",ge,[r.value.background?(a(),d("div",ke,[b[0]||(b[0]=o("h2",{class:"section-title"},"题目背景",-1)),n(E,{content:r.value.background},null,8,["content"])])):v("",!0),r.value.legend?(a(),d("div",Ce,[b[1]||(b[1]=o("h2",{class:"section-title"},"题目描述",-1)),n(E,{content:r.value.legend},null,8,["content"])])):v("",!0),r.value.formatI?(a(),d("div",he,[b[2]||(b[2]=o("h2",{class:"section-title"},"输入格式",-1)),n(E,{content:r.value.formatI},null,8,["content"])])):v("",!0),r.value.formatO?(a(),d("div",$e,[b[3]||(b[3]=o("h2",{class:"section-title"},"输出格式",-1)),n(E,{content:r.value.formatO},null,8,["content"])])):v("",!0),r.value.examples&&r.value.examples.length>0?(a(),d("div",Ve,[b[4]||(b[4]=o("h2",{class:"section-title"},"样例",-1)),(a(!0),d(P,null,z(r.value.examples,(h,C)=>(a(),d("div",{key:C,class:"example"},[n(e(K),{gutter:8},{default:u(()=>[n(e(M),{span:12,class:"data"},{default:u(()=>[o("h3",null,[g(" 输入 #"+_(C+1)+" ",1),o("a",{href:"#",onClick:O(Y=>y(C+1,h.dataI||""),["prevent"]),class:"copy-link"},[t.value!=C+1?(a(),f(e($),{key:0,icon:e(D)},null,8,["icon"])):(a(),f(e($),{key:1,icon:e(U)},null,8,["icon"]))],8,we)]),h.dataI?(a(),d("pre",Ee,_(h.dataI),1)):v("",!0)]),_:2},1024),n(e(M),{span:12,class:"data"},{default:u(()=>[o("h3",null,[g(" 输出 #"+_(C+1)+" ",1),o("a",{href:"#",onClick:O(Y=>y(-C-1,h.dataO||""),["prevent"]),class:"copy-link"},[t.value!=-C-1?(a(),f(e($),{key:0,icon:e(D)},null,8,["icon"])):(a(),f(e($),{key:1,icon:e(U)},null,8,["icon"]))],8,Pe)]),h.dataO?(a(),d("pre",Ie,_(h.dataO),1)):v("",!0)]),_:2},1024)]),_:2},1024)]))),128))])):v("",!0),r.value.hint?(a(),d("div",Se,[b[5]||(b[5]=o("h2",{class:"section-title"},"提示",-1)),n(E,{content:r.value.hint},null,8,["content"])])):v("",!0)])],64)):(a(),d(P,{key:1},[s.loading?N((a(),d("div",Be,null,512)),[[A,!0]]):(a(),f(e(Q),{key:1,description:"暂无题面"}))],64))]),_:1})}}}),Le=B(Te,[["__scopeId","data-v-d73679b8"]]),Me={class:"dialog-footer"},Oe=I({__name:"ProblemSubmit",props:W({problem:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(k){const{codeLangs:m}=F().config,i=X(k,"modelValue"),l=Z({lang:"",code:"",id:0});function c(p){if(!p.includes("."))return"";const t=p.split(".");return"."+t[t.length-1].toLowerCase()}function r(p){c(p.name),p.text().then(t=>l.code=t)}return(p,t)=>{const y=H("el-upload");return a(),f(e(x),{modelValue:i.value,"onUpdate:modelValue":t[4]||(t[4]=s=>i.value=s),title:"提交代码",width:"800"},{footer:u(()=>[o("div",Me,[n(e(w),{onClick:t[2]||(t[2]=s=>i.value=!1)},{default:u(()=>t[6]||(t[6]=[g("取消")])),_:1}),n(e(w),{type:"primary",onClick:t[3]||(t[3]=s=>i.value=!1)},{default:u(()=>t[7]||(t[7]=[g("提交")])),_:1})])]),default:u(()=>[n(e(oe),{model:l,"label-width":"auto"},{default:u(()=>[n(e(S),{label:"语言"},{default:u(()=>[n(e(ee),{modelValue:l.lang,"onUpdate:modelValue":t[0]||(t[0]=s=>l.lang=s),class:"input-lang",placeholder:"Language",size:"large"},{default:u(()=>[(a(!0),d(P,null,z(e(m),s=>(a(),f(e(le),{key:s.id,label:s.description,value:s.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),n(e(S),{label:"代码"},{default:u(()=>[n(e(te),{modelValue:l.code,"onUpdate:modelValue":t[1]||(t[1]=s=>l.code=s),autosize:{minRows:10,maxRows:15},class:"input-code",type:"textarea",placeholder:"Your code here..."},null,8,["modelValue"])]),_:1}),n(e(S),{label:"或者"},{default:u(()=>[n(y,{class:"upload-demo",action:"#","auto-upload":!1,"on-change":r,"show-file-list":!1},{default:u(()=>[n(e(w),{type:"primary"},{default:u(()=>t[5]||(t[5]=[g("上传代码")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),De={class:"panel-container"},Ue={key:0,class:"description-list"},Fe={class:"description-item"},Re={class:"item-value"},qe={class:"description-item"},ze={class:"item-value"},Ne={key:1,style:{height:"128px"}},Ae=I({__name:"ProblemPanel",props:{problem:{},result:{},edit:{type:Boolean,default:!1},loading:{type:Boolean}},setup(k){T();const m=V(!1);return(i,l)=>{const c=R("loading");return a(),d(P,null,[o("div",De,[n(e(q),null,{default:u(()=>[l[6]||(l[6]=o("h3",{class:"info-title"},"题目信息",-1)),i.problem?(a(),d("div",Ue,[o("div",Fe,[l[2]||(l[2]=o("span",{class:"item-label"},"编号",-1)),o("span",Re,_(i.problem.id),1)]),o("div",qe,[l[3]||(l[3]=o("span",{class:"item-label"},"难度",-1)),o("span",ze,_(i.problem.difficulty),1)]),l[4]||(l[4]=o("div",{class:"description-item"},[o("span",{class:"item-label"},"标签"),o("span",{class:"item-value"},"没写")],-1)),l[5]||(l[5]=o("div",{class:"description-item"},[o("span",{class:"item-label"},"来源"),o("span",{class:"item-value"},"没有")],-1))])):N((a(),d("div",Ne,null,512)),[[c,i.loading]])]),_:1}),n(e(w),{type:"primary",disabled:!i.problem,onClick:l[0]||(l[0]=r=>m.value=!0)},{default:u(()=>l[7]||(l[7]=[g("提交")])),_:1},8,["disabled"]),n(e(se),{fill:"","fill-ratio":40},{default:u(()=>[n(e(w),{plain:""},{default:u(()=>l[8]||(l[8]=[g("全部记录")])),_:1}),n(e(w),{plain:""},{default:u(()=>l[9]||(l[9]=[g("我的记录")])),_:1})]),_:1})]),i.problem?(a(),f(Oe,{key:0,problem:i.problem,modelValue:m.value,"onUpdate:modelValue":l[1]||(l[1]=r=>m.value=r)},null,8,["problem","modelValue"])):v("",!0)],64)}}}),Ye=B(Ae,[["__scopeId","data-v-b67711ba"]]),je={key:0,class:"toolbar"},Ge=I({__name:"ProblemToolbar",props:{problem:{},loading:{type:Boolean}},setup(k){const m=T();return(i,l)=>i.loading?v("",!0):(a(),d("div",je,[i.problem?(a(),f(e($),{key:0,icon:e(ae),class:"tool-icon"},null,8,["icon"])):v("",!0),i.problem?(a(),f(e($),{key:1,icon:e(ne),class:"tool-icon",onClick:l[0]||(l[0]=c=>e(m).push(`/problem/${i.problem.id}/edit`))},null,8,["icon"])):v("",!0)]))}}),Je=B(Ge,[["__scopeId","data-v-449d22aa"]]),Xe=I({__name:"ViewProblemDetail",props:{pid:{},plabel:{},cid_str:{}},setup(k){T();const m=ie(),i=V(null),l=V(null),c=V(!1);async function r(){i.value=null,c.value=!0;let t="";p.cid_str&&p.plabel?await m.enter(parseInt(p.cid_str)).then(()=>{t=m.currentContest.problems[p.plabel]}):p.pid&&(t=p.pid),t?await pe({problem:t}).then(y=>{i.value=y.problem,y.result&&(l.value=y.result)}).finally(()=>{c.value=!1}):c.value=!1}const p=k;return re(()=>{r()}),ue(p,()=>r()),(t,y)=>(a(),f(de,null,{main:u(()=>[n(Je,{loading:c.value,problem:i.value},null,8,["loading","problem"]),n(Le,{loading:c.value,problem:i.value},null,8,["loading","problem"])]),sidebar:u(()=>[n(me),n(Ye,{loading:c.value,problem:i.value,result:l.value},null,8,["loading","problem","result"])]),_:1}))}});export{Xe as default};
