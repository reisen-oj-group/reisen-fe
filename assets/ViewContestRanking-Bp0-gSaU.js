import{e as R,ab as S,K as B,p as A,P as $,q as w,r as L,s as o,o as s,f as E,h as e,x as r,y,v as k,w as v,g as p,t as i,j as N,aO as z,k as f,a9 as I,a_ as O,_ as x,Q as T,aa as j,z as K,U as P}from"./index-SVFsH89c.js";const q={class:"ranklist-container"},D={key:0,class:"ranklist"},Q={class:"colgroup"},U={class:"headline entry"},h={class:"rank"},G={class:"name"},H={class:"score-solved"},J={class:"score-penalty"},W=R({__name:"RankList",setup(F){const _=S(),l=B(()=>_.currentContest),c=B(()=>l.value?Object.keys(l.value.problems):[]),d=A([]),b=A(!1);function M(u,t){if(t.detail.type!=="ACM")return[];const m=[];for(const a in u.problems)m.push(t.detail.problems[u.problems[a]]??null);return m}function g(){l.value&&(b.value=!0,O({contest:l.value.id}).then(u=>{d.value=u.rankings}).finally(()=>{b.value=!1}))}$(()=>{g()}),w(l,g);function C(u){return u<=1?`${u} try`:`${u} tries`}return(u,t)=>{const m=L("router-link");return s(),o("div",q,[l.value?(s(),o("table",D,[e("colgroup",Q,[t[0]||(t[0]=e("col",{class:"col-rank"},null,-1)),t[1]||(t[1]=e("col",{class:"col-name"},null,-1)),t[2]||(t[2]=e("col",{class:"col-score-solved"},null,-1)),t[3]||(t[3]=e("col",{class:"col-score-penalty"},null,-1)),(s(!0),o(r,null,y(c.value,a=>(s(),o("col",{class:"col-problem",key:a}))),128)),t[4]||(t[4]=e("col",{class:"col-empty"},null,-1))]),e("thead",null,[e("tr",U,[t[5]||(t[5]=e("th",{class:"rank"},"RANK",-1)),t[6]||(t[6]=e("th",{class:"name"},"TEAM",-1)),t[7]||(t[7]=e("th",{class:"score",colspan:"2"},"SCORE",-1)),(s(!0),o(r,null,y(c.value,a=>(s(),o("th",{class:"problem-cell",key:a},[k(m,{class:"problem",to:`/contest/${l.value.id}/problem/${l.value.problems[a]}`},{default:v(()=>[p(i(a),1)]),_:2},1032,["to"])]))),128)),t[8]||(t[8]=e("th",null,null,-1))])]),e("tbody",null,[(s(!0),o(r,null,y(d.value,a=>(s(),o("tr",{class:"normal-line entry",key:a.ranking},[a.detail.type==="ACM"?(s(),o(r,{key:0},[e("td",h,i(a.ranking),1),e("td",G,i(a.team),1),e("td",H,i(a.detail.totalSolved),1),e("td",J,i(a.detail.totalPenalty),1),(s(!0),o(r,null,y(M(l.value,a),(n,V)=>(s(),o("td",{class:"result-cell",key:V},[n!==null?(s(),o("div",{key:0,class:z(["result",{solved:n.isSolved&&!n.isFirst,first:n.isFirst,attempted:!n.isSolved&&n.attemptBF,frozen:!n.isSolved&&!n.attemptBF&&n.attemptAF}])},[n.isSolved?(s(),o(r,{key:0},[p(i(n.penalty),1)],64)):(s(),o(r,{key:1},[p("   ")],64)),e("span",null,[n.attemptBF&&n.attemptAF?(s(),o(r,{key:0},[p(i(C(n.attemptBF+n.attemptAF)),1)],64)):n.attemptBF?(s(),o(r,{key:1},[p(i(C(n.attemptBF)),1)],64)):(s(),o(r,{key:2},[p(i(C(n.attemptAF)),1)],64))])],2)):N("",!0)]))),128)),t[9]||(t[9]=e("td",null,null,-1))],64)):(s(),o(r,{key:1},[],64))]))),128))])])):(s(),E(f(I),{key:1,description:"暂无排行"}))])}}}),X=x(W,[["__scopeId","data-v-2cf51cb7"]]),Y={class:"button-container"},Z=R({__name:"ViewContestRanking",props:{cid_str:{}},setup(F){const _=j(),l=F;return $(()=>{S().enter(parseInt(l.cid_str))}),(c,d)=>(s(),E(T,null,{default:v(()=>[e("div",Y,[k(f(K),{type:"primary",class:"back-button",onClick:d[0]||(d[0]=b=>f(_).push(`/contest/${c.cid_str}`))},{default:v(()=>d[1]||(d[1]=[p(" 返回比赛 ")])),_:1})]),k(f(P),{class:"ranklist-card"},{default:v(()=>[k(X)]),_:1})]),_:1}))}}),st=x(Z,[["__scopeId","data-v-199b4f70"]]);export{st as default};
