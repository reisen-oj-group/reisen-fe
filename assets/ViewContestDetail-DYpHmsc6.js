import{e as $,K as y,ai as x,f as p,o as e,k as s,a9 as D,p as S,P as E,r as I,T as N,s as r,h as a,x as g,y as L,j as V,g as P,t as C,v as l,w as u,ak as U,X as B,ay as O,_ as T,aa as j,F as q,ah as z,aj as A,U as K,V as M,W as h}from"./index-Dm7ZEwUe.js";import{_ as R,C as W}from"./ContestSidebar-6HKsyg8V.js";import"./markdown-YzgnQTJ0.js";const X=$({__name:"ContestOverview",setup(b){const o=y(()=>x().currentContest);return(t,n)=>o.value?(e(),p(R,{key:0,content:o.value.description},null,8,["content"])):(e(),p(s(D),{key:1,description:"比赛不存在"}))}}),G={key:0,class:"problemset"},H={class:"label"},J={class:"title"},Q={class:"acceptance"},Y={class:"accept-number"},Z={class:"acceptance-bar-container"},ee={key:0,style:{height:"200px"}},te=$({__name:"ContestProblems",setup(b){const o=x(),t=y(()=>o.currentContest),n=S([]),v=S(!1);function d(){t.value&&(v.value=!0,n.value=[],O({contest:t.value.id}).then(m=>{for(const i of m.problems)n.value.push({problem:i,label:w(i.id)})}).finally(()=>{v.value=!1}))}function w(m){if(!t.value)return null;const i=Object.keys(t.value.problems);for(const _ of i)if(t.value.problems[_]===m)return _;return null}return E(()=>{d()}),(m,i)=>{const _=I("router-link"),f=N("loading");return t.value&&n.value.length>0?(e(),r("table",G,[i[0]||(i[0]=a("colgroup",null,[a("col",{class:"col-label"}),a("col",{class:"col-title"}),a("col",{class:"col-acceptance"})],-1)),a("tbody",null,[(e(!0),r(g,null,L(n.value,({problem:c,label:k})=>(e(),r("tr",{class:"entry",key:c.id},[a("td",H,[k?(e(),r(g,{key:0},[P(C(k),1)],64)):V("",!0)]),a("td",J,[l(_,{to:`/contest/${t.value.id}/problem/${c.id}`,class:"problem-title"},{default:u(()=>[P(C(c.title["en-US"]),1)]),_:2},1032,["to"])]),a("td",Q,[a("span",Y,C(c.countCorrect)+" / "+C(c.countTotal),1),a("div",Z,[a("div",{class:"acceptance-bar",style:U({width:`${c.countTotal?100*c.countCorrect/c.countTotal:0}%`})},null,4)])])]))),128))])])):(e(),r(g,{key:1},[v.value?B((e(),r("div",ee,null,512)),[[f,!0]]):(e(),p(s(D),{key:1,description:"暂无试题"}))],64))}}}),se=T(te,[["__scopeId","data-v-75770468"]]),oe={};function ne(b,o){return e(),r("div")}const ae=T(oe,[["render",ne]]),le={key:0,class:"toolbar"},ce=$({__name:"ContestToolbar",setup(b){const o=j(),t=x(),n=y(()=>t.currentContest);return(v,d)=>s(t).loading?V("",!0):(e(),r("div",le,[n.value?(e(),p(s(q),{key:0,icon:s(z),class:"tool-icon",onClick:d[0]||(d[0]=w=>s(o).push(`/contest/${n.value.id}/edit`))},null,8,["icon"])):V("",!0)]))}}),re=T(ce,[["__scopeId","data-v-6e59ed6d"]]),ie={key:0,style:{height:"200px"}},ue=$({__name:"ViewContestDetail",props:{cid_str:{}},setup(b){const o=x(),t=j(),n=y(()=>o.currentContest),v=y(()=>o.loading),d=S("overview"),m=parseInt(b.cid_str),i=(_,f)=>{_.paneName==="ranking"&&(f.preventDefault(),t.push(`/contest/${n.value.id}/ranklist`))};return E(()=>{o.enter(m)}),(_,f)=>{const c=I("el-empty"),k=N("loading");return e(),p(A,null,{main:u(()=>[l(re),l(s(K),null,{default:u(()=>[n.value?(e(),p(s(M),{key:0,modelValue:d.value,"onUpdate:modelValue":f[0]||(f[0]=F=>d.value=F),class:"contest-tabs",onTabClick:i},{default:u(()=>[l(s(h),{label:"比赛详情",name:"overview"},{default:u(()=>[l(X)]),_:1}),l(s(h),{label:"题目列表",name:"problems"},{default:u(()=>[l(se)]),_:1}),l(s(h),{label:"我的提交",name:"submissions"},{default:u(()=>[l(ae)]),_:1}),l(s(h),{label:"排行榜",name:"ranking"})]),_:1},8,["modelValue"])):(e(),r(g,{key:1},[v.value?B((e(),r("div",ie,null,512)),[[k,!0]]):(e(),p(c,{key:1,description:"暂无数据"}))],64))]),_:1})]),sidebar:u(()=>[l(W)]),_:1})}}}),ve=T(ue,[["__scopeId","data-v-6f05ad94"]]);export{ve as default};
