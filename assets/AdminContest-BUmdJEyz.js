import{e as A,p as v,ac as M,P as O,s as S,h as C,X as N,v as e,w as n,a$ as P,T as K,f as R,k as o,b7 as j,r as p,aa as q,o as h,g as c,b1 as i,t as f,aq as w,aB as X,b2 as F,ay as G,b8 as H,O as k,_ as J}from"./index-DTUDYeuU.js";const L={class:"contest-list"},Q={class:"toolbar"},W=A({__name:"AdminContest",setup(Y){const x=q(),b=v([]),_=v(!1),u=M({current:1,size:50,total:0}),d=v({status:"",rule:"",keyword:""}),V=a=>{const l=new Date;return l<a.startTime?"未开始":l>a.endTime?"已结束":"进行中"},T=a=>{const l=new Date;return l<a.startTime?"info":l>a.endTime?"":"success"},s=async()=>{_.value=!0;try{const a=await j({page:u.current,filter:{}});b.value=a.contests,u.total=a.total}catch{}finally{_.value=!1}},z=()=>{},D=a=>{x.push(`/contest/${a.id}/edit`)},E=a=>{H.confirm(`确定删除比赛 "${a.title}"?`,"提示",{type:"warning"}).then(async()=>{try{k.success("删除成功"),s()}catch{k.error("删除失败")}})};return O(()=>{s()}),(a,l)=>{const m=p("el-button"),r=p("el-option"),y=p("el-select"),I=p("el-input"),B=p("router-link"),U=p("el-tag"),$=K("loading");return h(),S("div",L,[C("div",Q,[e(m,{type:"primary",onClick:z},{default:n(()=>l[4]||(l[4]=[c("创建比赛")])),_:1}),e(y,{modelValue:d.value.status,"onUpdate:modelValue":l[0]||(l[0]=t=>d.value.status=t),placeholder:"比赛状态",clearable:"",style:{width:"120px","margin-left":"10px"},onChange:s},{default:n(()=>[e(r,{label:"全部",value:""}),e(r,{label:"未开始",value:"pending"}),e(r,{label:"进行中",value:"running"}),e(r,{label:"已结束",value:"ended"})]),_:1},8,["modelValue"]),e(y,{modelValue:d.value.rule,"onUpdate:modelValue":l[1]||(l[1]=t=>d.value.rule=t),placeholder:"比赛规则",clearable:"",style:{width:"120px","margin-left":"10px"},onChange:s},{default:n(()=>[e(r,{label:"全部",value:""}),e(r,{label:"OI",value:"OI"}),e(r,{label:"ACM",value:"ACM"}),e(r,{label:"IOI",value:"IOI"})]),_:1},8,["modelValue"]),e(I,{modelValue:d.value.keyword,"onUpdate:modelValue":l[2]||(l[2]=t=>d.value.keyword=t),placeholder:"搜索比赛",style:{width:"300px","margin-left":"10px"},clearable:"",onClear:s,onKeyup:P(s,["enter"])},{append:n(()=>[e(m,{icon:"search",onClick:s})]),_:1},8,["modelValue"])]),N((h(),R(o(F),{data:b.value,border:"",style:{width:"100%","margin-top":"20px"}},{default:n(()=>[e(o(i),{prop:"id",label:"ID",width:"80"}),e(o(i),{label:"名称","min-width":"200"},{default:n(({row:t})=>[e(B,{to:`/contest/${t.id}`,class:"title-link"},{default:n(()=>[c(f(t.title),1)]),_:2},1032,["to"])]),_:1}),e(o(i),{label:"状态",width:"100"},{default:n(({row:t})=>[e(U,{type:T(t)},{default:n(()=>[c(f(V(t)),1)]),_:2},1032,["type"])]),_:1}),e(o(i),{label:"时间",width:"360"},{default:n(({row:t})=>[C("div",null,f(o(w)(t.startTime))+" ~ "+f(o(w)(t.endTime)),1)]),_:1}),e(o(i),{prop:"rule",label:"规则",width:"100"}),e(o(i),{label:"难度",width:"150"},{default:n(({row:t})=>[e(o(X),{modelValue:t.difficulty,"onUpdate:modelValue":g=>t.difficulty=g,disabled:"",max:5,"text-color":"#ff9900"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(o(i),{label:"操作",width:"180",fixed:"right"},{default:n(({row:t})=>[e(m,{link:"",type:"primary",size:"small",onClick:g=>D(t)},{default:n(()=>l[5]||(l[5]=[c("编辑")])),_:2},1032,["onClick"]),e(m,{link:"",type:"danger",size:"small",onClick:g=>E(t)},{default:n(()=>l[6]||(l[6]=[c("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[$,_.value]]),e(o(G),{"current-page":u.current,"onUpdate:currentPage":l[3]||(l[3]=t=>u.current=t),"page-size":u.size,"page-sizes":[10,20,50,100],total:u.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:s,onCurrentChange:s},null,8,["current-page","page-size","total"])])}}}),ee=J(W,[["__scopeId","data-v-21d4b1d8"]]);export{ee as default};
