import{e as C,n as L,p as b,q as j,T as M,s as m,o,v as l,w as d,x as S,k as i,W as D,f as k,h as s,N as q,t,a9 as N,y as F,ak as K,j as h,a2 as T,X as U,V as R,al as W,am as $,an as X,g as V,ao as G,_ as z,aa as H,ap as I,a1 as J,U as A,z as O,P as Q,aq as Y,aj as Z}from"./index-Dm7ZEwUe.js";const x={class:"submission-detail-main"},ss={key:0,class:"compile-info"},es={class:"compile-message"},is={class:"testcase-container"},ts=["onClick"],as={class:"testcase-id"},os={class:"testcase-verdict"},ls={class:"testcase-meta"},ns={key:0},ds={key:1},us={class:"code-container"},ms={class:"code-meta"},cs={class:"code-content"},rs={key:0,style:{height:"300px"}},ps={key:0,class:"testcase-detail"},bs={class:"details"},vs={class:"testcase-data"},_s={class:"testcase-data"},fs={class:"testcase-data"},gs=C({__name:"SubmissionMain",props:{submission:{},loading:{type:Boolean}},setup(v){const{verdicts:_,codeLangs:f}=L().config,p=v,r=b("testcases"),a=b(!1),e=b(null),g=b(0);function y(n,c){e.value=n,g.value=c,a.value=!0}return j(()=>p.loading,()=>{var n;p.submission&&((n=p.submission.compile)!=null&&n.success)?r.value="testcases":r.value="compile"}),(n,c)=>{const P=M("loading");return o(),m("div",x,[l(i(R),{modelValue:r.value,"onUpdate:modelValue":c[0]||(c[0]=u=>r.value=u),class:"detail-tabs"},{default:d(()=>[n.submission?(o(),m(S,{key:0},[l(i(D),{label:"编译信息",name:"compile"},{default:d(()=>[n.submission.compile?(o(),m("div",ss,[l(i(q),{type:n.submission.compile.success?"success":"error",title:n.submission.compile.success?"编译成功":"编译错误",closable:!1},null,8,["type","title"]),s("pre",es,t(n.submission.compile.message),1)])):(o(),k(i(N),{key:1,description:"暂无编译信息"}))]),_:1}),l(i(D),{label:"测试点",name:"testcases"},{default:d(()=>[s("div",is,[(o(!0),m(S,null,F(n.submission.detail,(u,E)=>{var w,B;return o(),m("div",{key:E,class:"testcase-item"},[s("div",{class:"testcase-badge",style:K({backgroundColor:`${((w=i(_)[u.verdict])==null?void 0:w.color)??"#0E1D69"}`}),onClick:Rs=>y(u,E)},[s("span",as,"#"+t(E+1),1),s("span",os,t(((B=i(_)[u.verdict])==null?void 0:B.abbr)??"UKE"),1),s("span",ls,[u.time!==void 0?(o(),m("span",ns,t(u.time)+"ms",1)):h("",!0),u.memory!==void 0?(o(),m("span",ds,t(i(T)(u.memory)),1)):h("",!0)])],12,ts)])}),128))])]),_:1}),l(i(D),{label:"代码",name:"code"},{default:d(()=>{var u;return[s("div",us,[s("div",ms,[s("span",null,"语言: "+t(((u=i(f)[n.submission.lang])==null?void 0:u.description)||"未知语言"),1),s("span",null,"代码长度: "+t(n.submission.length)+" bytes",1)]),s("pre",cs,[s("code",null,t(n.submission.code),1)])])]}),_:1})],64)):(o(),m(S,{key:1},[n.loading?U((o(),m("div",rs,null,512)),[[P,!0]]):(o(),k(i(N),{key:1,description:"未查询到记录"}))],64))]),_:1},8,["modelValue"]),l(i(G),{modelValue:a.value,"onUpdate:modelValue":c[1]||(c[1]=u=>a.value=u),title:`测试点 #${g.value+1} 详情`,width:"800"},{default:d(()=>[e.value?(o(),m("div",ps,[l(i(W),{column:4,border:""},{default:d(()=>[l(i($),{label:"状态"},{default:d(()=>[l(X,{verdict:e.value.verdict},null,8,["verdict"])]),_:1}),l(i($),{label:"用时"},{default:d(()=>[V(t(e.value.time)+"ms",1)]),_:1}),l(i($),{label:"内存"},{default:d(()=>[V(t(i(T)(e.value.memory)),1)]),_:1}),e.value.score!==void 0?(o(),k(i($),{key:0,label:"得分"},{default:d(()=>[V(t(e.value.score)+"分 ",1)]),_:1})):h("",!0)]),_:1}),s("div",bs,[c[2]||(c[2]=s("h3",null,"输入摘要",-1)),s("pre",vs,t(e.value.input),1),c[3]||(c[3]=s("h3",null,"输出摘要",-1)),s("pre",_s,t(e.value.output),1),c[4]||(c[4]=s("h3",null,"校验信息",-1)),s("pre",fs,t(e.value.checker),1)])])):h("",!0)]),_:1},8,["modelValue","title"])])}}}),ys=z(gs,[["__scopeId","data-v-abdfd94f"]]),hs={class:"panel-container"},$s={key:0,class:"description-list"},ks={class:"description-item"},Vs={class:"item-value"},Es={class:"description-item"},Ss={class:"item-value"},Ds={class:"description-item"},Ts={class:"item-value"},Cs={class:"description-item"},ws={class:"item-value"},Bs={class:"description-item"},Ns={class:"item-value"},Is={class:"description-item"},Ls={class:"item-value"},Ms={class:"description-item"},Us={class:"item-value"},zs={class:"description-item"},As={class:"item-value"},Ps={class:"description-item"},js={class:"item-value"},qs={key:1,style:{height:"288px"}},Fs=C({__name:"SubmissionSidebar",props:{submission:{},loading:{type:Boolean}},setup(v){const{codeLangs:_}=L().config,f=H(),p=()=>{r.submission&&f.push(`/problem/${r.submission.problem.id}`)},r=v;return(a,e)=>{const g=M("loading");return o(),m("div",hs,[l(i(A),null,{default:d(()=>{var y;return[e[9]||(e[9]=s("h3",null,"评测详情",-1)),a.submission?(o(),m("div",$s,[s("div",ks,[e[0]||(e[0]=s("span",{class:"item-label"},"编号",-1)),s("span",Vs,t(a.submission.id),1)]),s("div",Es,[e[1]||(e[1]=s("span",{class:"item-label"},"提交用户",-1)),s("span",Ss,t(a.submission.user.name),1)]),s("div",Ds,[e[2]||(e[2]=s("span",{class:"item-label"},"关联试题",-1)),s("span",Ts,t(a.submission.problem.title["zh-CN"]),1)]),s("div",Cs,[e[3]||(e[3]=s("span",{class:"item-label"},"提交时间",-1)),s("span",ws,t(i(I)(a.submission.submittedAt)),1)]),s("div",Bs,[e[4]||(e[4]=s("span",{class:"item-label"},"评测时间",-1)),s("span",Ns,t(i(I)(a.submission.processedAt)),1)]),s("div",Is,[e[5]||(e[5]=s("span",{class:"item-label"},"最终用时",-1)),s("span",Ls,t(i(J)(a.submission.time)),1)]),s("div",Ms,[e[6]||(e[6]=s("span",{class:"item-label"},"评测空间",-1)),s("span",Us,t(i(T)(a.submission.memory)),1)]),s("div",zs,[e[7]||(e[7]=s("span",{class:"item-label"},"代码长度",-1)),s("span",As,t(a.submission.length),1)]),s("div",Ps,[e[8]||(e[8]=s("span",{class:"item-label"},"评测语言",-1)),s("span",js,t(((y=i(_)[a.submission.lang])==null?void 0:y.description)??"未知语言"),1)])])):U((o(),m("div",qs,null,512)),[[g,a.loading]])]}),_:1}),l(i(O),{type:"primary",onClick:p,disabled:!a.submission},{default:d(()=>e[10]||(e[10]=[V(" 查看试题 ")])),_:1},8,["disabled"])])}}}),Ks=z(Fs,[["__scopeId","data-v-065cf483"]]),Xs=C({__name:"ViewSubmissionDetail",props:{rid_str:{}},setup(v){const f=parseInt(v.rid_str),p=b(null),r=b(!0);return Q(()=>{Y({id:f}).then(a=>{p.value=a.submission}).finally(()=>{r.value=!1})}),(a,e)=>(o(),k(Z,null,{main:d(()=>[l(i(A),null,{default:d(()=>[l(ys,{submission:p.value,loading:r.value},null,8,["submission","loading"])]),_:1})]),sidebar:d(()=>[l(Ks,{submission:p.value,loading:r.value},null,8,["submission","loading"])]),_:1}))}});export{Xs as default};
