import{e as x,ai as B,K as R,p as E,P as M,q as A,r as L,s as n,o as l,f as S,h as s,x as i,y as m,v,w as k,g as b,t as u,j as N,aD as F,k as y,a9 as I,aT as T,_ as V,Q as j,aa as z,z as D,U as K}from"./index-Dm7ZEwUe.js";const O={class:"ranklist-container"},P={key:0,class:"ranklist"},q={class:"colgroup"},Q={class:"headline entry"},U={class:"rank"},h={class:"name"},G={class:"score-solved"},H={class:"score-penalty"},J=x({__name:"RankList",setup(C){const f=B(),o=R(()=>f.currentContest),c=R(()=>o.value?Object.keys(o.value.problems):[]),a=E([]),_=E(!1);function $(d,t){if(t.detail.type!=="ACM")return[];const p=[];for(const e in d.problems)p.push(t.detail.problems[d.problems[e]]??null);return p}function g(){o.value&&(_.value=!0,T({contest:o.value.id}).then(d=>{a.value=d.rankings}).finally(()=>{_.value=!1}))}return M(()=>{g()}),A(o,g),(d,t)=>{const p=L("router-link");return l(),n("div",O,[o.value?(l(),n("table",P,[s("colgroup",q,[t[0]||(t[0]=s("col",{class:"col-rank"},null,-1)),t[1]||(t[1]=s("col",{class:"col-name"},null,-1)),t[2]||(t[2]=s("col",{class:"col-score-solved"},null,-1)),t[3]||(t[3]=s("col",{class:"col-score-penalty"},null,-1)),(l(!0),n(i,null,m(c.value,e=>(l(),n("col",{class:"col-problem",key:e}))),128)),t[4]||(t[4]=s("col",{class:"col-empty"},null,-1))]),s("thead",null,[s("tr",Q,[t[5]||(t[5]=s("th",{class:"rank"},"RANK",-1)),t[6]||(t[6]=s("th",{class:"name"},"TEAM",-1)),t[7]||(t[7]=s("th",{class:"score",colspan:"2"},"SCORE",-1)),(l(!0),n(i,null,m(c.value,e=>(l(),n("th",{class:"problem-cell",key:e},[v(p,{class:"problem",to:`/contest/${o.value.id}/problem/${o.value.problems[e]}`},{default:k(()=>[b(u(e),1)]),_:2},1032,["to"])]))),128)),t[8]||(t[8]=s("th",null,null,-1))])]),s("tbody",null,[(l(!0),n(i,null,m(a.value,e=>(l(),n("tr",{class:"normal-line entry",key:e.ranking},[e.detail.type==="ACM"?(l(),n(i,{key:0},[s("td",U,u(e.ranking),1),s("td",h,u(e.user),1),s("td",G,u(e.detail.totalSolved),1),s("td",H,u(e.detail.totalPenalty),1),(l(!0),n(i,null,m($(o.value,e),(r,w)=>(l(),n("td",{class:"result-cell",key:w},[r!==null?(l(),n("div",{key:0,class:F(["result",{solved:r.isSolved&&!r.isFirst,first:r.isFirst,attempted:!r.isSolved}])},[b(u(r.penalty)+" ",1),s("span",null,u(r.attemptBF),1)],2)):N("",!0)]))),128)),t[9]||(t[9]=s("td",null,null,-1))],64)):(l(),n(i,{key:1},[],64))]))),128))])])):(l(),S(y(I),{key:1,description:"暂无排行"}))])}}}),W=V(J,[["__scopeId","data-v-d9a89a6c"]]),X={class:"button-container"},Y=x({__name:"ViewContestRanking",props:{cid_str:{}},setup(C){const f=z(),o=C;return M(()=>{B().enter(parseInt(o.cid_str))}),(c,a)=>(l(),S(j,null,{default:k(()=>[s("div",X,[v(y(D),{type:"primary",class:"back-button",onClick:a[0]||(a[0]=_=>y(f).push(`/contest/${c.cid_str}`))},{default:k(()=>a[1]||(a[1]=[b(" 返回比赛 ")])),_:1})]),v(y(K),{class:"ranklist-card"},{default:k(()=>[v(W)]),_:1})]),_:1}))}}),tt=V(Y,[["__scopeId","data-v-199b4f70"]]);export{tt as default};
