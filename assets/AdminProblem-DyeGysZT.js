import{e as I,p as m,P as K,s as j,h,X as E,v as t,w as a,a$ as w,T as F,f as G,b5 as O,r as o,aa as R,o as C,g as s,k as _,F as X,b0 as q,t as p,a1 as H,a2 as J,S as L,b6 as Q,_ as W}from"./index-SVFsH89c.js";const Y={class:"problem-list"},Z={class:"toolbar"},ee={class:"filter-list"},te=I({__name:"AdminProblem",setup(le){const g=R(),y=m([]),f=m(!1),d=m({}),i=m({current:1,size:20,total:0}),k=n=>({public:"公开",private:"私有",contest:"比赛"})[n]||"未知",x=n=>({public:"success",private:"info",contest:"warning"})[n]||"",z=n=>({traditional:"传统题",interactive:"交互题"})[n]||"未知",c=async()=>{f.value=!0;try{const n=await O({page:i.value.current,...d.value});y.value=n.problems,i.value.total=n.total}finally{f.value=!1}},T=()=>{g.push("/problem/create")},S=n=>{g.push(`/problem/${n.id}/edit`)},u=()=>{i.value.current=1,c()},V=n=>{L.fire({title:"确认删除吗？",text:"删除后将无法恢复！",icon:"warning",showCancelButton:!0,confirmButtonText:"确认",cancelButtonText:"取消"}).then(l=>{l.isConfirmed&&Q({problem:n.id}).then(c)})};return K(()=>{c()}),(n,l)=>{const b=o("el-button"),v=o("el-option"),B=o("el-select"),P=o("el-input"),r=o("el-table-column"),D=o("router-link"),$=o("el-tag"),A=o("el-table"),M=o("el-pagination"),N=F("loading");return C(),j("div",Y,[h("div",Z,[t(b,{type:"primary",onClick:T},{default:a(()=>l[4]||(l[4]=[s("创建题目")])),_:1}),h("div",ee,[t(B,{modelValue:d.value.status,"onUpdate:modelValue":l[0]||(l[0]=e=>d.value.status=e),placeholder:"题目状态",style:{width:"120px","margin-left":"10px"},clearable:"",onChange:u,onClear:u,onKeyup:w(u,["enter"])},{default:a(()=>[t(v,{label:"公开",value:"public"}),t(v,{label:"私有",value:"private"}),t(v,{label:"比赛",value:"contest"})]),_:1},8,["modelValue"]),t(P,{modelValue:d.value.keywords,"onUpdate:modelValue":l[1]||(l[1]=e=>d.value.keywords=e),placeholder:"题目名称",style:{width:"300px","margin-left":"10px"},clearable:"",onClear:u,onKeyup:w(u,["enter"])},{append:a(()=>[t(_(X),{icon:_(q),onClick:u},null,8,["icon"])]),_:1},8,["modelValue"])])]),E((C(),G(A,{data:y.value,border:"",style:{width:"100%","margin-top":"20px"}},{default:a(()=>[t(r,{prop:"id",label:"ID",width:"120"}),t(r,{label:"标题","min-width":"200"},{default:a(({row:e})=>[t(D,{to:`/problem/${e.id}`,class:"title-link"},{default:a(()=>[s(p(e.title["zh-CN"]||Object.values(e.title)[0]||"暂无标题"),1)]),_:2},1032,["to"])]),_:1}),t(r,{label:"状态",width:"100"},{default:a(({row:e})=>[t($,{type:x(e.status)},{default:a(()=>[s(p(k(e.status)),1)]),_:2},1032,["type"])]),_:1}),t(r,{label:"类型",width:"100"},{default:a(({row:e})=>[s(p(z(e.type)),1)]),_:1}),t(r,{label:"时间限制",width:"120"},{default:a(({row:e})=>[s(p(_(H)(e.limitTime)),1)]),_:1}),t(r,{label:"空间限制",width:"120"},{default:a(({row:e})=>[s(p(_(J)(e.limitMemory)),1)]),_:1}),t(r,{label:"难度",width:"120"},{default:a(({row:e})=>[s(p(e.difficulty),1)]),_:1}),t(r,{label:"操作",width:"180",fixed:"right"},{default:a(({row:e})=>[t(b,{link:"",type:"primary",size:"small",onClick:U=>S(e)},{default:a(()=>l[5]||(l[5]=[s("编辑")])),_:2},1032,["onClick"]),t(b,{link:"",type:"danger",size:"small",onClick:U=>V(e)},{default:a(()=>l[6]||(l[6]=[s("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[N,f.value]]),t(M,{"current-page":i.value.current,"onUpdate:currentPage":l[2]||(l[2]=e=>i.value.current=e),"page-size":i.value.size,"onUpdate:pageSize":l[3]||(l[3]=e=>i.value.size=e),total:i.value.total,layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,50,100],onSizeChange:c,onCurrentChange:c},null,8,["current-page","page-size","total"])])}}}),ne=W(te,[["__scopeId","data-v-c36a0ddd"]]);export{ne as default};
