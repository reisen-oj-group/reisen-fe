import{c as M,d as x,r as E,q as b,o as d,s as e,w as a,f as m,j as l,R as F,_ as C,n as y,a1 as T,g as t,y as V,v as P,x as D,t as U,F as q,ae as G,ao as L,a5 as N,C as $,A as v,B as w,ap as A,K as O,M as I,H as R,I as j,N as H,e as S,O as J,h as K,am as Q,S as B,T as k}from"./index-CALB36uv.js";const W=async c=>M("/user",{method:"POST",body:c}),X={class:"practice-tab"},Y=x({__name:"TabPractice",props:{user:{}},setup(c){return(i,n)=>{const u=E("el-empty");return d(),b("div",X,[e(l(F),{class:"section"},{header:a(()=>n[0]||(n[0]=[m(" 参加的比赛 ")])),default:a(()=>[e(u,{description:"暂无比赛数据"})]),_:1})])}}}),z=C(Y,[["__scopeId","data-v-3bdb2350"]]),Z={class:"problem-tab"},h={class:"panel-header"},ee={class:"problemset"},le={class:"id"},se={class:"problem"},ae={class:"edit"},te={class:"panel-header"},oe=x({__name:"TabProblem",props:{user:{}},setup(c){const i=y(1),n=y(0),u=[];return(_,o)=>{const g=E("router-link"),f=E("el-card"),r=E("el-empty");return d(),b("div",Z,[e(l(N),{gutter:20},{default:a(()=>[e(l(T),{md:12,sm:24},{default:a(()=>[e(f,{class:"panel"},{default:a(()=>[t("div",h,[o[2]||(o[2]=t("h3",null,"我创建的题目",-1)),e(l(V),{type:"primary",size:"small"},{default:a(()=>o[1]||(o[1]=[m("新建题目")])),_:1})]),t("table",ee,[o[5]||(o[5]=t("colgroup",null,[t("col",{class:"col-id"}),t("col",{class:"col-title"}),t("col",{class:"col-submit"}),t("col",{class:"col-status"}),t("col",{class:"col-edit"})],-1)),t("tbody",null,[(d(),b(P,null,D(u,s=>t("tr",{class:"entry",key:s.id},[t("td",le,U(s.id),1),t("td",se,[e(g,{to:`/problem/${s.id}`,class:"problem-title"},{default:a(()=>[m(U(s.title["en-US"]),1)]),_:2},1032,["to"])]),o[3]||(o[3]=t("td",{class:"submit"},"10.1k 提交",-1)),o[4]||(o[4]=t("td",{class:"status"},"公开",-1)),t("td",ae,[e(l(q),{icon:l(G)},null,8,["icon"])])])),64))])]),e(l(L),{"current-page":i.value,"onUpdate:currentPage":o[0]||(o[0]=s=>i.value=s),"page-size":20,total:n.value},null,8,["current-page","total"])]),_:1})]),_:1}),e(l(T),{md:12,sm:24},{default:a(()=>[e(f,{class:"panel"},{default:a(()=>[t("div",te,[o[7]||(o[7]=t("h3",null,"我创建的比赛",-1)),e(l(V),{type:"primary",size:"small"},{default:a(()=>o[6]||(o[6]=[m("新建比赛")])),_:1})]),e(r,{description:"暂无比赛数据"})]),_:1})]),_:1})]),_:1})])}}}),ue=C(oe,[["__scopeId","data-v-80ce3c52"]]),ne={class:"settings-tab"},re=x({__name:"TabSettings",props:{user:{}},setup(c){const i=c,n=y({username:i.user.name,email:"user@example.com"}),u=y({current:"",new:"",confirm:""}),_=y(i.user.avatar);function o(){I.success("设置已保存")}function g(){I.success("密码已修改")}function f(r){_.value=r.url,I.success("头像上传成功")}return(r,s)=>(d(),b("div",ne,[e(l(F),null,{default:a(()=>[e(l(N),{gutter:48},{default:a(()=>[e(l(T),{span:12,class:"safety"},{default:a(()=>[s[8]||(s[8]=t("h3",null,"账号设置",-1)),e(l($),{"label-width":"80px"},{default:a(()=>[e(l(v),{label:"用户名"},{default:a(()=>[e(l(w),{modelValue:n.value.username,"onUpdate:modelValue":s[0]||(s[0]=p=>n.value.username=p)},null,8,["modelValue"])]),_:1}),e(l(v),{label:"电子邮箱"},{default:a(()=>[e(l(w),{modelValue:n.value.email,"onUpdate:modelValue":s[1]||(s[1]=p=>n.value.email=p)},null,8,["modelValue"]),e(l(V),{size:"small",type:"text"},{default:a(()=>s[5]||(s[5]=[m("验证邮箱")])),_:1})]),_:1}),e(l(v),null,{default:a(()=>[e(l(V),{type:"primary",onClick:o},{default:a(()=>s[6]||(s[6]=[m("保存更改")])),_:1})]),_:1})]),_:1}),s[9]||(s[9]=t("h3",null,"密码安全",-1)),e(l($),{"label-width":"80px"},{default:a(()=>[e(l(v),{label:"当前密码"},{default:a(()=>[e(l(w),{modelValue:u.value.current,"onUpdate:modelValue":s[2]||(s[2]=p=>u.value.current=p),type:"password"},null,8,["modelValue"])]),_:1}),e(l(v),{label:"新密码"},{default:a(()=>[e(l(w),{modelValue:u.value.new,"onUpdate:modelValue":s[3]||(s[3]=p=>u.value.new=p),type:"password"},null,8,["modelValue"])]),_:1}),e(l(v),{label:"确认密码"},{default:a(()=>[e(l(w),{modelValue:u.value.confirm,"onUpdate:modelValue":s[4]||(s[4]=p=>u.value.confirm=p),type:"password"},null,8,["modelValue"])]),_:1}),e(l(v),null,{default:a(()=>[e(l(V),{type:"primary",onClick:g},{default:a(()=>s[7]||(s[7]=[m("修改密码")])),_:1})]),_:1})]),_:1})]),_:1}),e(l(T),{span:12,class:"avatar-upload"},{default:a(()=>[e(l(A),{size:150,src:_.value},null,8,["src"]),e(l(O),{action:"/api/upload/avatar","show-file-list":!1,"on-success":f},{default:a(()=>[e(l(V),{type:"primary"},{default:a(()=>s[10]||(s[10]=[m("上传新头像")])),_:1})]),_:1}),s[11]||(s[11]=t("p",{class:"tip"},"支持 JPG/PNG 格式，大小不超过 2MB",-1))]),_:1})]),_:1})]),_:1})]))}}),de=C(re,[["__scopeId","data-v-b54b4ccd"]]),ie={class:"user-profile"},pe={class:"user-header"},me={class:"user-meta"},ce=x({__name:"ViewUser",props:{uid_str:{}},setup(c){const i=c,n=R().currentUser,u=y(null),_=i.uid_str?parseInt(i.uid_str):(n==null?void 0:n.id)||0,o=y("practice"),g=j(()=>(n==null?void 0:n.id)===_);return H(()=>{W({user:_}).then(f=>{u.value=f.user})}),(f,r)=>(d(),S(J,null,{default:a(()=>[t("div",ie,[u.value?(d(),b(P,{key:0},[l(_)===0?(d(),b(P,{key:0},[m(" 尚未登录。 ")],64)):(d(),b(P,{key:1},[t("div",pe,[e(l(A),{size:120,src:u.value.avatar},null,8,["src"]),t("h1",null,U(u.value.name),1),t("div",me,[t("span",null,"注册于 "+U(l(Q)(u.value.register)),1),r[2]||(r[2]=t("span",null,"解决 100 道题目",-1))])]),g.value?(d(),S(l(B),{key:0,modelValue:o.value,"onUpdate:modelValue":r[0]||(r[0]=s=>o.value=s),class:"profile-tabs"},{default:a(()=>[e(l(k),{label:"练习",name:"practice"},{default:a(()=>[e(z,{user:u.value},null,8,["user"])]),_:1}),e(l(k),{label:"题库",name:"problems"},{default:a(()=>[e(ue,{user:u.value},null,8,["user"])]),_:1}),e(l(k),{label:"设置",name:"settings"},{default:a(()=>[e(de,{user:u.value},null,8,["user"])]),_:1})]),_:1},8,["modelValue"])):(d(),S(l(B),{key:1,modelValue:o.value,"onUpdate:modelValue":r[1]||(r[1]=s=>o.value=s),class:"profile-tabs"},{default:a(()=>[e(l(k),{label:"练习",name:"practice"},{default:a(()=>[e(z,{user:u.value},null,8,["user"])]),_:1})]),_:1},8,["modelValue"]))],64))],64)):K("",!0)])]),_:1}))}}),fe=C(ce,[["__scopeId","data-v-f612e4ce"]]);export{fe as default};
