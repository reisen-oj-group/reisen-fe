import{d as I,u as w,n as V,p as x,r as y,q as _,o as r,s as e,w as u,j as l,A as i,B as E,g as T,aw as B,E as C,G as m,C as O,f as M,_ as g,N as $,e as b,O as D,ax as N,Q as P,R,S as A,T as U,v as F,U as q}from"./index-CALB36uv.js";import{_ as L}from"./MdEditor.vue_vue_type_script_setup_true_lang-BCw9rNio.js";import"./markdown-Ptyy3W22.js";const S={class:"basic-container"},j=I({__name:"ContestEditBasic",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(v){const t=w(v,"modelValue"),n=V();x(n,()=>{n.value&&([t.value.startTime,t.value.endTime]=n.value)});function s(){}return(f,a)=>{const c=y("el-date-picker"),d=y("el-button");return r(),_("div",S,[e(l(O),{modelValue:t.value,"onUpdate:modelValue":a[7]||(a[7]=o=>t.value=o),"label-width":100},{default:u(()=>[e(l(i),{label:"比赛名称",class:"form-item"},{default:u(()=>[e(l(E),{modelValue:t.value.title,"onUpdate:modelValue":a[0]||(a[0]=o=>t.value.title=o)},null,8,["modelValue"])]),_:1}),e(l(i),{label:"起止时间",class:"form-item"},{default:u(()=>[e(c,{modelValue:n.value,"onUpdate:modelValue":a[1]||(a[1]=o=>n.value=o),type:"datetimerange","start-placeholder":"开始时间","end-placeholder":"结束时间"},null,8,["modelValue"])]),_:1}),e(l(i),{label:"头图",class:"form-item"},{default:u(()=>[e(l(E),{modelValue:t.value.banner,"onUpdate:modelValue":a[2]||(a[2]=o=>t.value.banner=o)},null,8,["modelValue"]),a[8]||(a[8]=T("span",{class:"explain"},"填入比赛头图 URL，用于在比赛列表展示。若为空则不显示头图。",-1))]),_:1}),e(l(i),{label:"描述"},{default:u(()=>[e(L,{class:"editor",modelValue:t.value.description,"onUpdate:modelValue":a[3]||(a[3]=o=>t.value.description=o)},null,8,["modelValue"])]),_:1}),e(l(i),{label:"难度"},{default:u(()=>[e(l(B),{modelValue:t.value.difficulty,"onUpdate:modelValue":a[4]||(a[4]=o=>t.value.difficulty=o),size:"large"},null,8,["modelValue"])]),_:1}),e(l(i),{label:"赛制"},{default:u(()=>[e(l(C),{modelValue:t.value.rule,"onUpdate:modelValue":a[5]||(a[5]=o=>t.value.rule=o),class:"form-item"},{default:u(()=>[e(l(m),{value:"OI",label:"OI 赛制"}),e(l(m),{value:"ACM",label:"ACM 赛制"}),e(l(m),{value:"IOI",label:"IOI 赛制"})]),_:1},8,["modelValue"])]),_:1}),e(l(i),{label:"权限"},{default:u(()=>[e(l(C),{modelValue:t.value.status,"onUpdate:modelValue":a[6]||(a[6]=o=>t.value.status=o),class:"form-item"},{default:u(()=>[e(l(m),{value:"public",label:"公开"}),e(l(m),{value:"private",label:"邀请"}),e(l(m),{value:"delete",label:"删除"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),e(d,{type:"primary",onClick:s},{default:u(()=>a[9]||(a[9]=[M(" 保存 ")])),_:1})])}}}),z=g(j,[["__scopeId","data-v-77d0c008"]]),G={},Q={class:"editor-container"};function H(v,t){return r(),_("div",Q)}const J=g(G,[["render",H]]),K={key:0,style:{height:"200px"}},Z=I({__name:"ViewContestEdit",props:{cid_str:{}},setup(v){const t=V("basic"),n=v,s=V(null),f=V(!1);async function a(){s.value=null,n.cid_str?(f.value=!0,await N({contest:parseInt(n.cid_str)}).then(c=>{s.value=c.contest}).finally(()=>{f.value=!1})):s.value={id:0,title:"",summary:"",description:"",difficulty:1,status:"private",startTime:new Date,endTime:new Date,rule:"IOI",problems:{}}}return $(()=>{a()}),(c,d)=>{const o=y("el-empty"),k=P("loading");return r(),b(D,null,{default:u(()=>[e(l(R),null,{default:u(()=>[s.value?(r(),b(l(A),{key:0,modelValue:t.value,"onUpdate:modelValue":d[2]||(d[2]=p=>t.value=p)},{default:u(()=>[e(l(U),{label:"基本信息",name:"basic"},{default:u(()=>[e(z,{modelValue:s.value,"onUpdate:modelValue":d[0]||(d[0]=p=>s.value=p)},null,8,["modelValue"])]),_:1}),e(l(U),{label:"比赛试题",name:"problemset"},{default:u(()=>[e(J,{modelValue:s.value,"onUpdate:modelValue":d[1]||(d[1]=p=>s.value=p)},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])):(r(),_(F,{key:1},[f.value?q((r(),_("div",K,null,512)),[[k,!0]]):(r(),b(o,{key:1,description:"暂无数据"}))],64))]),_:1})]),_:1})}}});export{Z as default};
