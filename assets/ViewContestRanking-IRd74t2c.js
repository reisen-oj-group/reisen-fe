import{d as x,a5 as S,Q as $,l as g,I as V,n as M,r as j,p as r,o as l,c as w,f as s,s as p,v as f,q as v,w as m,e as b,t as c,g as P,ao as T,h as k,Z as A,aE as O,_ as B,L as q,a1 as z,x as D,M as F}from"./index-CDm0RDJi.js";const K={class:"ranklist-container"},Q={key:0,class:"ranklist"},Z={class:"colgroup"},h={class:"headline entry"},G={class:"rank"},H={class:"name"},J={class:"score-solved"},U={class:"score-penalty"},W=x({__name:"RankList",setup(R){const y=S(),n=$(()=>y.currentContest),i=$(()=>n.value?Object.keys(n.value.problems):[]),u=g([]),_=g(!1);function E(){n.value&&(_.value=!0,O({contest:n.value.id}).then(o=>{u.value=o.rankings,I()}).finally(()=>{_.value=!1}))}V(()=>{E()}),M(n,E);const C=g([]);function L(o,t){const a=o.results[t];return a?a.judge==="correct"?"solved":"attempted":""}function N(o){return o<=1?`${o} try`:`${o} tries`}function I(){if(n.value){C.value=[];for(const o of u.value){const t={rank:o.rank,user:o.user,totalPenalty:0,totalSolved:0,results:{}};for(const a of o.results)for(const e of i.value)if(n.value.problems[e]===a.problem){t.results[e]=a,a.judge==="correct"&&(t.totalPenalty+=a.penalty,t.totalSolved++);break}C.value.push(t)}}}return(o,t)=>{const a=j("router-link");return l(),r("div",K,[n.value?(l(),r("table",Q,[s("colgroup",Z,[t[0]||(t[0]=s("col",{class:"col-rank"},null,-1)),t[1]||(t[1]=s("col",{class:"col-name"},null,-1)),t[2]||(t[2]=s("col",{class:"col-score-solved"},null,-1)),t[3]||(t[3]=s("col",{class:"col-score-penalty"},null,-1)),(l(!0),r(p,null,f(i.value,e=>(l(),r("col",{class:"col-problem",key:e}))),128)),t[4]||(t[4]=s("col",{class:"col-empty"},null,-1))]),s("thead",null,[s("tr",h,[t[5]||(t[5]=s("th",{class:"rank"},"RANK",-1)),t[6]||(t[6]=s("th",{class:"name"},"TEAM",-1)),t[7]||(t[7]=s("th",{class:"score",colspan:"2"},"SCORE",-1)),(l(!0),r(p,null,f(i.value,e=>(l(),r("th",{class:"problem-cell",key:e},[v(a,{class:"problem",to:`/contest/${n.value.id}/problem/${n.value.problems[e]}`},{default:m(()=>[b(c(e),1)]),_:2},1032,["to"])]))),128)),t[8]||(t[8]=s("th",null,null,-1))])]),s("tbody",null,[(l(!0),r(p,null,f(C.value,e=>(l(),r("tr",{class:"normal-line entry",key:e.rank},[s("td",G,c(e.rank),1),s("td",H,c(e.user),1),s("td",J,c(e.totalSolved),1),s("td",U,c(e.totalPenalty),1),(l(!0),r(p,null,f(i.value,d=>(l(),r("td",{class:"result-cell",key:d},[e.results[d]?(l(),r("div",{key:0,class:T(["result",L(e,d)])},[b(c(e.results[d].penalty)+" ",1),s("span",null,c(N(e.results[d].attempt)),1)],2)):P("",!0)]))),128)),t[9]||(t[9]=s("td",null,null,-1))]))),128))])])):(l(),w(k(A),{key:1,description:"暂无排行"}))])}}}),X=B(W,[["__scopeId","data-v-e720a747"]]),Y={class:"button-container"},tt=x({__name:"ViewContestRanking",props:{cid_str:{}},setup(R){const y=z(),n=R;return V(()=>{S().enter(parseInt(n.cid_str))}),(i,u)=>(l(),w(q,null,{default:m(()=>[s("div",Y,[v(k(D),{type:"primary",class:"back-button",onClick:u[0]||(u[0]=_=>k(y).push(`/contest/${i.cid_str}`))},{default:m(()=>u[1]||(u[1]=[b(" 返回比赛 ")])),_:1})]),v(k(F),{class:"ranklist-card"},{default:m(()=>[v(X)]),_:1})]),_:1}))}}),et=B(tt,[["__scopeId","data-v-199b4f70"]]);export{et as default};
