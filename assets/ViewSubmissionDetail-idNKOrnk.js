import{e as C,n as B,p as b,q as U,T as N,s as u,o,v as l,w as d,x as S,k as i,W as E,f as $,h as s,N as j,t,a9 as D,y as q,ak as A,j as y,a2 as T,X as I,V as F,al as R,am as h,an as W,g as k,ao as X,_ as L,aa as G,ap as w,a1 as H,U as M,z as J,P as K,aq as O,aj as Q}from"./index-D9OJ9fva.js";const Y={class:"submission-detail-main"},Z={key:0,class:"compile-info"},x={class:"compile-message"},ss={class:"testcase-container"},es=["onClick"],is={class:"testcase-id"},ts={class:"testcase-verdict"},as={class:"testcase-meta"},os={key:0},ls={key:1},ns={class:"code-container"},ds={class:"code-meta"},us={class:"code-content"},ms={key:0,style:{height:"300px"}},cs={key:0,class:"testcase-detail"},rs={class:"details"},ps={class:"testcase-data"},bs={class:"testcase-data"},vs={class:"testcase-data"},_s=C({__name:"SubmissionMain",props:{submission:{},loading:{type:Boolean}},setup(v){const{verdicts:_,codeLangs:f}=B().config,p=v,c=b("testcases"),a=b(!1),e=b(null),g=b(0);function z(n,m){e.value=n,g.value=m,a.value=!0}return U(()=>p.loading,()=>{var n;p.submission&&((n=p.submission.compile)!=null&&n.success)?c.value="testcases":c.value="compile"}),(n,m)=>{const P=N("loading");return o(),u("div",Y,[l(i(F),{modelValue:c.value,"onUpdate:modelValue":m[0]||(m[0]=r=>c.value=r),class:"detail-tabs"},{default:d(()=>[n.submission?(o(),u(S,{key:0},[l(i(E),{label:"编译信息",name:"compile"},{default:d(()=>[n.submission.compile?(o(),u("div",Z,[l(i(j),{type:n.submission.compile.success?"success":"error",title:n.submission.compile.success?"编译成功":"编译错误",closable:!1},null,8,["type","title"]),s("pre",x,t(n.submission.compile.message),1)])):(o(),$(i(D),{key:1,description:"暂无编译信息"}))]),_:1}),l(i(E),{label:"测试点",name:"testcases"},{default:d(()=>[s("div",ss,[(o(!0),u(S,null,q(n.submission.detail,(r,V)=>(o(),u("div",{key:V,class:"testcase-item"},[s("div",{class:"testcase-badge",style:A({backgroundColor:`${i(_)[r.verdict].color}`}),onClick:Fs=>z(r,V)},[s("span",is,"#"+t(V+1),1),s("span",ts,t(i(_)[r.verdict].abbr),1),s("span",as,[r.time!==void 0?(o(),u("span",os,t(r.time)+"ms",1)):y("",!0),r.memory!==void 0?(o(),u("span",ls,t(i(T)(r.memory)),1)):y("",!0)])],12,es)]))),128))])]),_:1}),l(i(E),{label:"代码",name:"code"},{default:d(()=>[s("div",ns,[s("div",ds,[s("span",null,"语言: "+t(i(f)[n.submission.lang].description),1),s("span",null,"代码长度: "+t(n.submission.length)+" bytes",1)]),s("pre",us,[s("code",null,t(n.submission.code),1)])])]),_:1})],64)):(o(),u(S,{key:1},[n.loading?I((o(),u("div",ms,null,512)),[[P,!0]]):(o(),$(i(D),{key:1,description:"未查询到记录"}))],64))]),_:1},8,["modelValue"]),l(i(X),{modelValue:a.value,"onUpdate:modelValue":m[1]||(m[1]=r=>a.value=r),title:`测试点 #${g.value+1} 详情`,width:"800"},{default:d(()=>[e.value?(o(),u("div",cs,[l(i(R),{column:4,border:""},{default:d(()=>[l(i(h),{label:"状态"},{default:d(()=>[l(W,{verdict:e.value.verdict},null,8,["verdict"])]),_:1}),l(i(h),{label:"用时"},{default:d(()=>[k(t(e.value.time)+"ms",1)]),_:1}),l(i(h),{label:"内存"},{default:d(()=>[k(t(i(T)(e.value.memory)),1)]),_:1}),e.value.score!==void 0?(o(),$(i(h),{key:0,label:"得分"},{default:d(()=>[k(t(e.value.score)+"分 ",1)]),_:1})):y("",!0)]),_:1}),s("div",rs,[m[2]||(m[2]=s("h3",null,"输入摘要",-1)),s("pre",ps,t(e.value.input),1),m[3]||(m[3]=s("h3",null,"输出摘要",-1)),s("pre",bs,t(e.value.output),1),m[4]||(m[4]=s("h3",null,"校验信息",-1)),s("pre",vs,t(e.value.checker),1)])])):y("",!0)]),_:1},8,["modelValue","title"])])}}}),fs=L(_s,[["__scopeId","data-v-d096c986"]]),gs={class:"panel-container"},ys={key:0,class:"description-list"},hs={class:"description-item"},$s={class:"item-value"},ks={class:"description-item"},Vs={class:"item-value"},Ss={class:"description-item"},Es={class:"item-value"},Ts={class:"description-item"},Cs={class:"item-value"},Ds={class:"description-item"},ws={class:"item-value"},Bs={class:"description-item"},Ns={class:"item-value"},Is={class:"description-item"},Ls={class:"item-value"},Ms={class:"description-item"},zs={class:"item-value"},Ps={class:"description-item"},Us={class:"item-value"},js={key:1,style:{height:"288px"}},qs=C({__name:"SubmissionSidebar",props:{submission:{},loading:{type:Boolean}},setup(v){const{codeLangs:_}=B().config,f=G(),p=()=>{c.submission&&f.push(`/problem/${c.submission.problem.id}`)},c=v;return(a,e)=>{const g=N("loading");return o(),u("div",gs,[l(i(M),null,{default:d(()=>[e[9]||(e[9]=s("h3",null,"评测详情",-1)),a.submission?(o(),u("div",ys,[s("div",hs,[e[0]||(e[0]=s("span",{class:"item-label"},"编号",-1)),s("span",$s,t(a.submission.id),1)]),s("div",ks,[e[1]||(e[1]=s("span",{class:"item-label"},"提交用户",-1)),s("span",Vs,t(a.submission.user.name),1)]),s("div",Ss,[e[2]||(e[2]=s("span",{class:"item-label"},"关联试题",-1)),s("span",Es,t(a.submission.problem.title["zh-CN"]),1)]),s("div",Ts,[e[3]||(e[3]=s("span",{class:"item-label"},"提交时间",-1)),s("span",Cs,t(i(w)(a.submission.submission)),1)]),s("div",Ds,[e[4]||(e[4]=s("span",{class:"item-label"},"评测时间",-1)),s("span",ws,t(i(w)(a.submission.evaluation)),1)]),s("div",Bs,[e[5]||(e[5]=s("span",{class:"item-label"},"最终用时",-1)),s("span",Ns,t(i(H)(a.submission.time)),1)]),s("div",Is,[e[6]||(e[6]=s("span",{class:"item-label"},"评测空间",-1)),s("span",Ls,t(i(T)(a.submission.memory)),1)]),s("div",Ms,[e[7]||(e[7]=s("span",{class:"item-label"},"代码长度",-1)),s("span",zs,t(a.submission.length),1)]),s("div",Ps,[e[8]||(e[8]=s("span",{class:"item-label"},"评测语言",-1)),s("span",Us,t(i(_)[a.submission.lang].description),1)])])):I((o(),u("div",js,null,512)),[[g,a.loading]])]),_:1}),l(i(J),{type:"primary",onClick:p,disabled:!a.submission},{default:d(()=>e[10]||(e[10]=[k(" 查看试题 ")])),_:1},8,["disabled"])])}}}),As=L(qs,[["__scopeId","data-v-af179d89"]]),Ws=C({__name:"ViewSubmissionDetail",props:{rid_str:{}},setup(v){const f=parseInt(v.rid_str),p=b(null),c=b(!0);return K(()=>{O({id:f}).then(a=>{p.value=a.submission}).finally(()=>{c.value=!1})}),(a,e)=>(o(),$(Q,null,{main:d(()=>[l(i(M),null,{default:d(()=>[l(fs,{submission:p.value,loading:c.value},null,8,["submission","loading"])]),_:1})]),sidebar:d(()=>[l(As,{submission:p.value,loading:c.value},null,8,["submission","loading"])]),_:1}))}});export{Ws as default};
