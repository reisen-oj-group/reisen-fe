import{m as L}from"./markdown-YzgnQTJ0.js";import{e as M,p as C,az as z,s,o as n,aa as E,ai as N,K as w,q as V,P as A,aA as D,r as H,j as x,v as u,w as _,x as T,h as c,t as k,k as p,aB as I,aC as P,g as y,y as R,aD as j,U,z as q,_ as F}from"./index-Dm7ZEwUe.js";const K=["innerHTML"],ne=M({__name:"MdRender",props:{content:{}},setup(h){const a=C(""),r=h;return z(()=>{L(r.content).then(e=>{a.value=e})}),(e,g)=>(n(),s("div",{class:"markdown-wrap",innerHTML:a.value},null,8,K))}}),O={key:0,class:"contest-sidebar"},G={class:"contest-info"},J={class:"contest-time"},Q={key:0},W={key:1},X={class:"problem-badges"},Y=["onClick"],Z=M({__name:"ContestSidebar",setup(h){const a=E(),r=N(),e=w(()=>r.currentContest),g=w(()=>r.currentRanking),d=C(0),v=C(1);function f(){e.value&&(d.value=Math.max(0,e.value.endTime.getTime()-Date.now()),v.value=e.value.endTime.getTime()-e.value.startTime.getTime())}V(e,f);function $(l,t){if(t===null||t.detail.type!=="ACM")return[];const i={};for(const o in l.problems)i[o]=t.detail.problems[l.problems[o]]??null;return i}function B(l){e.value&&a.push(`/contest/${e.value.id}/${l}`)}function S(){r.exit(),a.push("/contest")}let b;return A(()=>{f(),b=window.setInterval(f,1e3)}),D(()=>{clearInterval(b)}),(l,t)=>{const i=H("router-link");return e.value?(n(),s("div",O,[u(p(U),null,{default:_(()=>[e.value?(n(),s(T,{key:0},[c("div",G,[u(i,{to:`/contest/${e.value.id}`},{default:_(()=>[c("h3",null,k(e.value.title),1)]),_:1},8,["to"]),c("div",J,[u(p(I),{percentage:100*(v.value-d.value)/v.value,"stroke-width":15,striped:"","show-text":!1},null,8,["percentage"]),c("div",null,[d.value>0?(n(),s("span",Q,"剩余时间 "+k(p(P)(d.value)),1)):(n(),s("span",W,"比赛已结束")),u(i,{class:"link-ranklist",to:`/contest/${e.value.id}/ranklist`},{default:_(()=>t[0]||(t[0]=[y(" 排行榜 ")])),_:1},8,["to"])])])]),c("div",X,[(n(!0),s(T,null,R(Object.entries($(e.value,g.value)),([o,m])=>(n(),s("div",{class:j(["problem-badge",{"status-success":m&&m.isSolved,"status-danger":m&&!m.isSolved}]),key:o,onClick:ee=>B(o)},k(o),11,Y))),128))])],64)):x("",!0)]),_:1}),u(p(q),{type:"primary",onClick:S},{default:_(()=>t[1]||(t[1]=[y("退出比赛模式")])),_:1})])):x("",!0)}}}),oe=F(Z,[["__scopeId","data-v-d8fc2dfc"]]);export{oe as C,ne as _};
