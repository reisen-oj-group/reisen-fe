import{d as $,I as y,af as x,e as p,o as e,j as s,a6 as E,n as S,N as I,r as N,Q as P,q as r,g as a,v as g,x as L,h as V,f as D,t as C,s as l,w as u,ah as R,U as B,aq as U,_ as T,a7 as q,F as j,ae as O,ag as z,R as A,S as M,T as h}from"./index-CALB36uv.js";import{_ as Q,C as G}from"./ContestSidebar-DBG9dPEh.js";import"./markdown-Ptyy3W22.js";const H=$({__name:"ContestOverview",setup(b){const o=y(()=>x().currentContest);return(t,n)=>o.value?(e(),p(Q,{key:0,content:o.value.description},null,8,["content"])):(e(),p(s(E),{key:1,description:"比赛不存在"}))}}),J={key:0,class:"problemset"},K={class:"label"},W={class:"title"},X={class:"acceptance"},Y={class:"accept-number"},Z={class:"acceptance-bar-container"},ee={key:0,style:{height:"200px"}},te=$({__name:"ContestProblems",setup(b){const o=x(),t=y(()=>o.currentContest),n=S([]),v=S(!1);function d(){t.value&&(v.value=!0,n.value=[],U({contest:t.value.id}).then(m=>{for(const i of m.problems)n.value.push({problem:i,label:w(i.id)})}).finally(()=>{v.value=!1}))}function w(m){if(!t.value)return null;const i=Object.keys(t.value.problems);for(const _ of i)if(t.value.problems[_]===m)return _;return null}return I(()=>{d()}),(m,i)=>{const _=N("router-link"),f=P("loading");return t.value&&n.value.length>0?(e(),r("table",J,[i[0]||(i[0]=a("colgroup",null,[a("col",{class:"col-label"}),a("col",{class:"col-title"}),a("col",{class:"col-acceptance"})],-1)),a("tbody",null,[(e(!0),r(g,null,L(n.value,({problem:c,label:k})=>(e(),r("tr",{class:"entry",key:c.id},[a("td",K,[k?(e(),r(g,{key:0},[D(C(k),1)],64)):V("",!0)]),a("td",W,[l(_,{to:`/contest/${t.value.id}/problem/${c.id}`,class:"problem-title"},{default:u(()=>[D(C(c.title["en-US"]),1)]),_:2},1032,["to"])]),a("td",X,[a("span",Y,C(c.countCorrect)+" / "+C(c.countTotal),1),a("div",Z,[a("div",{class:"acceptance-bar",style:R({width:`${c.countTotal?100*c.countCorrect/c.countTotal:0}%`})},null,4)])])]))),128))])])):(e(),r(g,{key:1},[v.value?B((e(),r("div",ee,null,512)),[[f,!0]]):(e(),p(s(E),{key:1,description:"暂无试题"}))],64))}}}),se=T(te,[["__scopeId","data-v-75770468"]]),oe={};function ne(b,o){return e(),r("div")}const ae=T(oe,[["render",ne]]),le={key:0,class:"toolbar"},ce=$({__name:"ContestToolbar",setup(b){const o=q(),t=x(),n=y(()=>t.currentContest);return(v,d)=>s(t).loading?V("",!0):(e(),r("div",le,[n.value?(e(),p(s(j),{key:0,icon:s(O),class:"tool-icon",onClick:d[0]||(d[0]=w=>s(o).push(`/contest/${n.value.id}/edit`))},null,8,["icon"])):V("",!0)]))}}),re=T(ce,[["__scopeId","data-v-6e59ed6d"]]),ie={key:0,style:{height:"200px"}},ue=$({__name:"ViewContestDetail",props:{cid_str:{}},setup(b){const o=x(),t=q(),n=y(()=>o.currentContest),v=y(()=>o.loading),d=S("overview"),m=parseInt(b.cid_str),i=(_,f)=>{_.paneName==="ranking"&&(f.preventDefault(),t.push(`/contest/${n.value.id}/ranklist`))};return I(()=>{o.enter(m)}),(_,f)=>{const c=N("el-empty"),k=P("loading");return e(),p(z,null,{main:u(()=>[l(re),l(s(A),null,{default:u(()=>[n.value?(e(),p(s(M),{key:0,modelValue:d.value,"onUpdate:modelValue":f[0]||(f[0]=F=>d.value=F),class:"contest-tabs",onTabClick:i},{default:u(()=>[l(s(h),{label:"比赛详情",name:"overview"},{default:u(()=>[l(H)]),_:1}),l(s(h),{label:"题目列表",name:"problems"},{default:u(()=>[l(se)]),_:1}),l(s(h),{label:"我的提交",name:"submissions"},{default:u(()=>[l(ae)]),_:1}),l(s(h),{label:"排行榜",name:"ranking"})]),_:1},8,["modelValue"])):(e(),r(g,{key:1},[v.value?B((e(),r("div",ie,null,512)),[[k,!0]]):(e(),p(c,{key:1,description:"暂无数据"}))],64))]),_:1})]),sidebar:u(()=>[l(G)]),_:1})}}}),ve=T(ue,[["__scopeId","data-v-9f9ffdfd"]]);export{ve as default};
