import{e as R,ab as $,K as B,p as A,P as S,q as w,r as L,s as a,o as s,f as E,h as e,x as r,y,v as k,w as v,g as p,t as u,j as N,aO as O,k as _,a9 as I,a_ as T,_ as x,Q as j,aa as z,A as K,U as P}from"./index-DTUDYeuU.js";const h={class:"ranklist-container"},q={key:0,class:"ranklist"},D={class:"colgroup"},J={class:"headline entry"},Q={class:"rank"},U={class:"name"},G={class:"score-solved"},H={class:"score-penalty"},W=R({__name:"RankList",setup(g){const f=$(),l=B(()=>f.currentContest),c=B(()=>l.value?Object.keys(l.value.problems):[]),d=A([]),b=A(!1);function M(i,t){if(t.detail.type!=="ACM")return[];const m=[];for(const o in i.problems)m.push(t.detail.problems[i.problems[o]]??null);return m}function F(){l.value&&(b.value=!0,T({contest:l.value.id}).then(i=>{d.value=i.rankings}).finally(()=>{b.value=!1}))}S(()=>{F()}),w(l,F);function C(i){return i<=1?`${i} try`:`${i} tries`}return(i,t)=>{const m=L("router-link");return s(),a("div",h,[l.value?(s(),a("table",q,[e("colgroup",D,[t[0]||(t[0]=e("col",{class:"col-rank"},null,-1)),t[1]||(t[1]=e("col",{class:"col-name"},null,-1)),t[2]||(t[2]=e("col",{class:"col-score-solved"},null,-1)),t[3]||(t[3]=e("col",{class:"col-score-penalty"},null,-1)),(s(!0),a(r,null,y(c.value,o=>(s(),a("col",{class:"col-problem",key:o}))),128)),t[4]||(t[4]=e("col",{class:"col-empty"},null,-1))]),e("thead",null,[e("tr",J,[t[5]||(t[5]=e("th",{class:"rank"},"RANK",-1)),t[6]||(t[6]=e("th",{class:"name"},"TEAM",-1)),t[7]||(t[7]=e("th",{class:"score",colspan:"2"},"SCORE",-1)),(s(!0),a(r,null,y(c.value,o=>(s(),a("th",{class:"problem-cell",key:o},[k(m,{class:"problem",to:`/contest/${l.value.id}/problem/${l.value.problems[o]}`},{default:v(()=>[p(u(o),1)]),_:2},1032,["to"])]))),128)),t[8]||(t[8]=e("th",null,null,-1))])]),e("tbody",null,[(s(!0),a(r,null,y(d.value,o=>(s(),a("tr",{class:"normal-line entry",key:o.ranking},[o.detail.type==="ACM"?(s(),a(r,{key:0},[e("td",Q,u(o.ranking),1),e("td",U,u(o.team),1),e("td",G,u(o.detail.totalSolved),1),e("td",H,u(o.detail.totalPenalty),1),(s(!0),a(r,null,y(M(l.value,o),(n,V)=>(s(),a("td",{class:"result-cell",key:V},[n!==null?(s(),a("div",{key:0,class:O(["result",{solved:n.isSolved&&!n.isFirst,first:n.isFirst,attempted:!n.isSolved&&n.attemptBF,frozen:!n.isSolved&&!n.attemptBF&&n.attemptAF}])},[n.isSolved?(s(),a(r,{key:0},[p(u(n.penalty),1)],64)):(s(),a(r,{key:1},[p("   ")],64)),e("span",null,[n.attemptBF&&n.attemptAF?(s(),a(r,{key:0},[p(u(C(n.attemptBF+n.attemptAF)),1)],64)):n.attemptBF?(s(),a(r,{key:1},[p(u(C(n.attemptBF)),1)],64)):(s(),a(r,{key:2},[p(u(C(n.attemptAF)),1)],64))])],2)):N("",!0)]))),128)),t[9]||(t[9]=e("td",null,null,-1))],64)):(s(),a(r,{key:1},[],64))]))),128))])])):(s(),E(_(I),{key:1,description:"暂无排行"}))])}}}),X=x(W,[["__scopeId","data-v-2cf51cb7"]]),Y={class:"button-container"},Z=R({__name:"ViewContestRanking",props:{cid_str:{}},setup(g){const f=z(),l=g;return S(()=>{$().enter(parseInt(l.cid_str))}),(c,d)=>(s(),E(j,{bread:[{label:"Reisen Online Judge",to:{name:"home"}},{label:"比赛列表",to:{name:"contest-list"}},{label:`#${l.cid_str}`,to:{name:"contest-detail",params:{cid_str:l.cid_str}}},{label:"比赛排名"}]},{default:v(()=>[e("div",Y,[k(_(K),{type:"primary",class:"back-button",onClick:d[0]||(d[0]=b=>_(f).push(`/contest/${c.cid_str}`))},{default:v(()=>d[1]||(d[1]=[p(" 返回比赛 ")])),_:1})]),k(_(P),{class:"ranklist-card"},{default:v(()=>[k(X)]),_:1})]),_:1},8,["bread"]))}}),st=x(Z,[["__scopeId","data-v-b726152e"]]);export{st as default};
