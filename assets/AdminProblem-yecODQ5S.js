import{e as $,p as _,P as E,s as j,h as O,X as A,v as t,w as l,aP as I,T as K,f as L,aT as R,O as f,r as s,aa as X,o as y,g as i,t as c,k as h,a1 as q,a2 as F,aS as G,_ as H}from"./index-ByD3yNI7.js";const J={class:"problem-list"},Q={class:"toolbar"},W=$({__name:"AdminProblem",setup(Y){const k=X(),b=_([]),v=_(!1),d=_({status:"",type:"",keyword:""}),u=_({current:1,size:20,total:0}),w=o=>({public:"公开",private:"私有",contest:"比赛"})[o]||"未知",C=o=>({public:"success",private:"info",contest:"warning"})[o]||"",x=o=>({traditional:"传统题",interactive:"交互题"})[o]||"未知",n=async()=>{v.value=!0;try{const o=await R({page:u.value.current});b.value=o.problems,u.value.total=o.total}catch{f.error("获取题目列表失败")}finally{v.value=!1}},z=()=>{},V=o=>{k.push(`/problem/${o.id}/edit`)},T=o=>{G.confirm(`确定删除题目 "${o.title["zh-CN"]||Object.values(o.title)[0]}"?`,"提示",{type:"warning"}).then(async()=>{try{f.success("删除成功"),n()}catch{f.error("删除失败")}})};return E(()=>{n()}),(o,a)=>{const m=s("el-button"),p=s("el-option"),g=s("el-select"),P=s("el-input"),r=s("el-table-column"),S=s("router-link"),B=s("el-tag"),D=s("el-table"),M=s("el-pagination"),N=K("loading");return y(),j("div",J,[O("div",Q,[t(m,{type:"primary",onClick:z},{default:l(()=>a[5]||(a[5]=[i("创建题目")])),_:1}),t(g,{modelValue:d.value.status,"onUpdate:modelValue":a[0]||(a[0]=e=>d.value.status=e),placeholder:"题目状态",clearable:"",style:{width:"120px","margin-left":"10px"},onChange:n},{default:l(()=>[t(p,{label:"全部",value:""}),t(p,{label:"公开",value:"public"}),t(p,{label:"私有",value:"private"}),t(p,{label:"比赛",value:"contest"})]),_:1},8,["modelValue"]),t(g,{modelValue:d.value.type,"onUpdate:modelValue":a[1]||(a[1]=e=>d.value.type=e),placeholder:"题目类型",clearable:"",style:{width:"120px","margin-left":"10px"},onChange:n},{default:l(()=>[t(p,{label:"全部",value:""}),t(p,{label:"传统题",value:"traditional"}),t(p,{label:"交互题",value:"interactive"})]),_:1},8,["modelValue"]),t(P,{modelValue:d.value.keyword,"onUpdate:modelValue":a[2]||(a[2]=e=>d.value.keyword=e),placeholder:"搜索题目",style:{width:"300px","margin-left":"10px"},clearable:"",onClear:n,onKeyup:I(n,["enter"])},{append:l(()=>[t(m,{icon:"search",onClick:n})]),_:1},8,["modelValue"])]),A((y(),L(D,{data:b.value,border:"",style:{width:"100%","margin-top":"20px"}},{default:l(()=>[t(r,{prop:"id",label:"ID",width:"120"}),t(r,{label:"标题","min-width":"200"},{default:l(({row:e})=>[t(S,{to:`/admin/problems/${e.id}`,class:"title-link"},{default:l(()=>[i(c(e.title["zh-CN"]||Object.values(e.title)[0]),1)]),_:2},1032,["to"])]),_:1}),t(r,{label:"状态",width:"100"},{default:l(({row:e})=>[t(B,{type:C(e.status)},{default:l(()=>[i(c(w(e.status)),1)]),_:2},1032,["type"])]),_:1}),t(r,{label:"类型",width:"100"},{default:l(({row:e})=>[i(c(x(e.type)),1)]),_:1}),t(r,{label:"时间限制",width:"120"},{default:l(({row:e})=>[i(c(h(q)(e.limitTime)),1)]),_:1}),t(r,{label:"空间限制",width:"120"},{default:l(({row:e})=>[i(c(h(F)(e.limitMemory)),1)]),_:1}),t(r,{label:"难度",width:"120"},{default:l(({row:e})=>[i(c(e.difficulty),1)]),_:1}),t(r,{label:"操作",width:"180",fixed:"right"},{default:l(({row:e})=>[t(m,{link:"",type:"primary",size:"small",onClick:U=>V(e)},{default:l(()=>a[6]||(a[6]=[i("编辑")])),_:2},1032,["onClick"]),t(m,{link:"",type:"danger",size:"small",onClick:U=>T(e)},{default:l(()=>a[7]||(a[7]=[i("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[N,v.value]]),t(M,{"current-page":u.value.current,"onUpdate:currentPage":a[3]||(a[3]=e=>u.value.current=e),"page-size":u.value.size,"onUpdate:pageSize":a[4]||(a[4]=e=>u.value.size=e),total:u.value.total,layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,50,100],onSizeChange:n,onCurrentChange:n},null,8,["current-page","page-size","total"])])}}}),ee=H(W,[["__scopeId","data-v-fc67ef5c"]]);export{ee as default};
