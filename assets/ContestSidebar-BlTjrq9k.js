import{m as L}from"./markdown-O7Rz5C9z.js";import{e as M,p as h,aN as N,s,o as n,aa as E,ab as V,K as w,q as A,P as H,aW as I,r as P,j as x,v as u,w as _,x as T,h as c,t as k,k as p,aX as R,aY as j,g as y,y as z,aO as D,U as O,A as U,_ as q}from"./index-DTUDYeuU.js";const F=["innerHTML"],ne=M({__name:"MdRender",props:{content:{}},setup(C){const a=h(""),r=C;return N(()=>{L(r.content).then(e=>{a.value=e})}),(e,g)=>(n(),s("div",{class:"markdown-wrap",innerHTML:a.value},null,8,F))}}),K={key:0,class:"contest-sidebar"},W={class:"contest-info"},X={class:"contest-time"},Y={key:0},G={key:1},J={class:"problem-badges"},Q=["onClick"],Z=M({__name:"ContestSidebar",setup(C){const a=E(),r=V(),e=w(()=>r.currentContest),g=w(()=>r.currentRanking),d=h(0),v=h(1);function f(){e.value&&(d.value=Math.max(0,e.value.endTime.getTime()-Date.now()),v.value=e.value.endTime.getTime()-e.value.startTime.getTime())}A(e,f);function $(l,t){if(t===null||t.detail.type!=="ACM")return[];const i={};for(const o in l.problems)i[o]=t.detail.problems[l.problems[o]]??null;return i}function S(l){e.value&&a.push(`/contest/${e.value.id}/${l}`)}function B(){r.exit(),a.push("/contest")}let b;return H(()=>{f(),b=window.setInterval(f,1e3)}),I(()=>{clearInterval(b)}),(l,t)=>{const i=P("router-link");return e.value?(n(),s("div",K,[u(p(O),null,{default:_(()=>[e.value?(n(),s(T,{key:0},[c("div",W,[u(i,{to:`/contest/${e.value.id}`},{default:_(()=>[c("h3",null,k(e.value.title),1)]),_:1},8,["to"]),c("div",X,[u(p(R),{percentage:100*(v.value-d.value)/v.value,"stroke-width":15,striped:"","show-text":!1},null,8,["percentage"]),c("div",null,[d.value>0?(n(),s("span",Y,"剩余时间 "+k(p(j)(d.value)),1)):(n(),s("span",G,"比赛已结束")),u(i,{class:"link-ranklist",to:`/contest/${e.value.id}/ranklist`},{default:_(()=>t[0]||(t[0]=[y(" 排行榜 ")])),_:1},8,["to"])])])]),c("div",J,[(n(!0),s(T,null,z(Object.entries($(e.value,g.value)),([o,m])=>(n(),s("div",{class:D(["problem-badge",{"status-success":m&&m.isSolved,"status-danger":m&&!m.isSolved}]),key:o,onClick:ee=>S(o)},k(o),11,Q))),128))])],64)):x("",!0)]),_:1}),u(p(U),{type:"primary",onClick:B},{default:_(()=>t[1]||(t[1]=[y("退出比赛模式")])),_:1})])):x("",!0)}}}),oe=q(Z,[["__scopeId","data-v-d8fc2dfc"]]);export{oe as C,ne as _};
