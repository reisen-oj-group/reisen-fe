import{e as I,p as m,P as K,s as j,h,X as E,v as t,w as l,aQ as w,T as F,f as R,aW as X,r as o,aa as G,o as C,g as s,k as _,F as O,aR as Q,t as p,a1 as W,a2 as q,S as H,aX as J,_ as L}from"./index-DrYKQVxV.js";const Y={class:"problem-list"},Z={class:"toolbar"},ee={class:"filter-list"},te=I({__name:"AdminProblem",setup(ae){const g=G(),y=m([]),f=m(!1),c=m({}),i=m({current:1,size:20,total:0}),k=n=>({public:"公开",private:"私有",contest:"比赛"})[n]||"未知",x=n=>({public:"success",private:"info",contest:"warning"})[n]||"",z=n=>({traditional:"传统题",interactive:"交互题"})[n]||"未知",d=async()=>{f.value=!0;try{const n=await X({page:i.value.current,...c.value});y.value=n.problems,i.value.total=n.total}finally{f.value=!1}},T=()=>{g.push("/problem/create")},S=n=>{g.push(`/problem/${n.id}/edit`)},u=()=>{i.value.current=1,d()},V=n=>{H.fire({title:"确认删除吗？",text:"删除后将无法恢复！",icon:"warning",showCancelButton:!0,confirmButtonText:"确认",cancelButtonText:"取消"}).then(a=>{J({problem:n.id}).then(d)})};return K(()=>{d()}),(n,a)=>{const v=o("el-button"),b=o("el-option"),B=o("el-select"),P=o("el-input"),r=o("el-table-column"),D=o("router-link"),A=o("el-tag"),M=o("el-table"),N=o("el-pagination"),U=F("loading");return C(),j("div",Y,[h("div",Z,[t(v,{type:"primary",onClick:T},{default:l(()=>a[4]||(a[4]=[s("创建题目")])),_:1}),h("div",ee,[t(B,{modelValue:c.value.status,"onUpdate:modelValue":a[0]||(a[0]=e=>c.value.status=e),placeholder:"题目状态",style:{width:"120px","margin-left":"10px"},clearable:"",onChange:u,onClear:u,onKeyup:w(u,["enter"])},{default:l(()=>[t(b,{label:"公开",value:"public"}),t(b,{label:"私有",value:"private"}),t(b,{label:"比赛",value:"contest"})]),_:1},8,["modelValue"]),t(P,{modelValue:c.value.keywords,"onUpdate:modelValue":a[1]||(a[1]=e=>c.value.keywords=e),placeholder:"题目名称",style:{width:"300px","margin-left":"10px"},clearable:"",onClear:u,onKeyup:w(u,["enter"])},{append:l(()=>[t(_(O),{icon:_(Q),onClick:u},null,8,["icon"])]),_:1},8,["modelValue"])])]),E((C(),R(M,{data:y.value,border:"",style:{width:"100%","margin-top":"20px"}},{default:l(()=>[t(r,{prop:"id",label:"ID",width:"120"}),t(r,{label:"标题","min-width":"200"},{default:l(({row:e})=>[t(D,{to:`/admin/problems/${e.id}`,class:"title-link"},{default:l(()=>[s(p(e.title["zh-CN"]||Object.values(e.title)[0]||"暂无标题"),1)]),_:2},1032,["to"])]),_:1}),t(r,{label:"状态",width:"100"},{default:l(({row:e})=>[t(A,{type:x(e.status)},{default:l(()=>[s(p(k(e.status)),1)]),_:2},1032,["type"])]),_:1}),t(r,{label:"类型",width:"100"},{default:l(({row:e})=>[s(p(z(e.type)),1)]),_:1}),t(r,{label:"时间限制",width:"120"},{default:l(({row:e})=>[s(p(_(W)(e.limitTime)),1)]),_:1}),t(r,{label:"空间限制",width:"120"},{default:l(({row:e})=>[s(p(_(q)(e.limitMemory)),1)]),_:1}),t(r,{label:"难度",width:"120"},{default:l(({row:e})=>[s(p(e.difficulty),1)]),_:1}),t(r,{label:"操作",width:"180",fixed:"right"},{default:l(({row:e})=>[t(v,{link:"",type:"primary",size:"small",onClick:$=>S(e)},{default:l(()=>a[5]||(a[5]=[s("编辑")])),_:2},1032,["onClick"]),t(v,{link:"",type:"danger",size:"small",onClick:$=>V(e)},{default:l(()=>a[6]||(a[6]=[s("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[U,f.value]]),t(N,{"current-page":i.value.current,"onUpdate:currentPage":a[2]||(a[2]=e=>i.value.current=e),"page-size":i.value.size,"onUpdate:pageSize":a[3]||(a[3]=e=>i.value.size=e),total:i.value.total,layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,50,100],onSizeChange:d,onCurrentChange:d},null,8,["current-page","page-size","total"])])}}}),ne=L(te,[["__scopeId","data-v-ad04af50"]]);export{ne as default};
