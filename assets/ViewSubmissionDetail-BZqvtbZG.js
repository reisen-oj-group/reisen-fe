import{e as w,n as M,p as f,al as J,T as U,s as u,o as a,v as d,w as c,x as E,k as t,W as V,f as k,h as s,N as W,t as o,a9 as I,y as j,X as C,am as q,j as h,a2 as T,V as F,an as K,ao as $,ap as R,g as D,ad as X,_ as z,aa as G,ab as H,aq as P,a1 as O,U as A,z as Q,P as Y,ar as Z,as as x,ak as ss,at as es}from"./index-SVFsH89c.js";const is={class:"submission-detail-main"},ts={key:0,class:"compile-info"},os={class:"compile-message"},as={class:"testcase-container"},ls={key:0,class:"testcase-badge pending","element-loading-svg-view-box":"0, 0, 50, 50","element-loading-background":"transparent"},ns=["onClick"],ds={class:"testcase-id"},us={class:"testcase-verdict"},cs={class:"testcase-meta"},rs={key:0},ms={key:1},ps={class:"code-container"},bs={class:"code-meta"},vs={class:"code-content"},_s={key:0,style:{height:"300px"}},fs={key:0,class:"testcase-detail"},gs={class:"details"},ys={class:"testcase-data"},hs={class:"testcase-data"},$s={class:"testcase-data"},ks=w({__name:"SubmissionMain",props:{submission:{},loading:{type:Boolean}},setup(g){const{verdicts:y,codeLangs:v}=M().config,r=g,p=f("testcases"),b=f(!1),i=f(null),e=f(0);function _(l,m){i.value=l,e.value=m,b.value=!0}return J(()=>{var l;r.submission&&(((l=r.submission.compile)==null?void 0:l.success)===!1?p.value="compile":r.submission.verdict==="JD"&&(p.value="testcases"))}),(l,m)=>{const B=U("loading");return a(),u("div",is,[d(t(F),{modelValue:p.value,"onUpdate:modelValue":m[0]||(m[0]=n=>p.value=n),class:"detail-tabs"},{default:c(()=>[l.submission?(a(),u(E,{key:0},[d(t(V),{label:"编译信息",name:"compile"},{default:c(()=>[l.submission.compile?(a(),u("div",ts,[d(t(W),{type:l.submission.compile.success?"success":"error",title:l.submission.compile.success?"编译成功":"编译错误",closable:!1},null,8,["type","title"]),s("pre",os,o(l.submission.compile.message),1)])):(a(),k(t(I),{key:1,description:"暂无编译信息"}))]),_:1}),d(t(V),{label:"测试点",name:"testcases"},{default:c(()=>[s("div",as,[(a(!0),u(E,null,j(l.submission.detail,(n,S)=>{var L,N;return a(),u("div",{key:S,class:"testcase-item"},[n.verdict==="JD"||n.verdict==="PD"?C((a(),u("div",ls,null,512)),[[B,!0]]):(a(),u("div",{key:1,class:"testcase-badge",style:q({backgroundColor:`${((L=t(y)[n.verdict])==null?void 0:L.color)??"#0E1D69"}`}),onClick:Gs=>_(n,S)},[s("span",ds,"#"+o(S+1),1),s("span",us,o(((N=t(y)[n.verdict])==null?void 0:N.abbr)??"UKE"),1),s("span",cs,[n.time!==void 0?(a(),u("span",rs,o(n.time)+"ms",1)):h("",!0),n.memory!==void 0?(a(),u("span",ms,o(t(T)(n.memory)),1)):h("",!0)])],12,ns))])}),128))])]),_:1}),d(t(V),{label:"代码",name:"code"},{default:c(()=>{var n;return[s("div",ps,[s("div",bs,[s("span",null,"语言: "+o(((n=t(v)[l.submission.lang])==null?void 0:n.description)||"未知语言"),1),s("span",null,"代码长度: "+o(l.submission.length)+" bytes",1)]),s("pre",vs,[s("code",null,o(l.submission.code),1)])])]}),_:1})],64)):(a(),u(E,{key:1},[l.loading?C((a(),u("div",_s,null,512)),[[B,!0]]):(a(),k(t(I),{key:1,description:"未查询到记录"}))],64))]),_:1},8,["modelValue"]),d(t(X),{modelValue:b.value,"onUpdate:modelValue":m[1]||(m[1]=n=>b.value=n),title:`测试点 #${e.value+1} 详情`,width:"800"},{default:c(()=>[i.value?(a(),u("div",fs,[d(t(K),{column:4,border:""},{default:c(()=>[d(t($),{label:"状态"},{default:c(()=>[d(R,{verdict:i.value.verdict},null,8,["verdict"])]),_:1}),d(t($),{label:"用时"},{default:c(()=>[D(o(i.value.time)+"ms",1)]),_:1}),d(t($),{label:"内存"},{default:c(()=>[D(o(t(T)(i.value.memory)),1)]),_:1}),i.value.score!==void 0?(a(),k(t($),{key:0,label:"得分"},{default:c(()=>[D(o(i.value.score)+"分 ",1)]),_:1})):h("",!0)]),_:1}),s("div",gs,[m[2]||(m[2]=s("h3",null,"输入摘要",-1)),s("pre",ys,o(i.value.input),1),m[3]||(m[3]=s("h3",null,"输出摘要",-1)),s("pre",hs,o(i.value.output),1),m[4]||(m[4]=s("h3",null,"校验信息",-1)),s("pre",$s,o(i.value.checker),1)])])):h("",!0)]),_:1},8,["modelValue","title"])])}}}),Ds=z(ks,[["__scopeId","data-v-49b5384b"]]),Ss={class:"panel-container"},Es={key:0,class:"description-list"},Vs={class:"description-item"},Cs={class:"item-value"},Ts={class:"description-item"},ws={class:"item-value"},Bs={class:"description-item"},Ls={class:"item-value"},Ns={class:"description-item"},Is={class:"item-value"},Ps={class:"description-item"},Ms={class:"item-value"},Us={class:"description-item"},zs={class:"item-value"},As={class:"description-item"},Js={class:"item-value"},Ws={class:"description-item"},js={class:"item-value"},qs={class:"description-item"},Fs={class:"item-value"},Ks={key:1,style:{height:"288px"}},Rs=w({__name:"SubmissionSidebar",props:{submission:{},loading:{type:Boolean}},setup(g){const{codeLangs:y}=M().config,v=G(),r=H(),p=()=>{const i=b.submission;if(i&&i.problem)if(i.contest){const e=i.contest;r.enter(e).then(()=>{v.push(`/contest/${e}/${r.getLabel(i.problem.id)}`)})}else v.push(`/problem/${i.problem.id}`)},b=g;return(i,e)=>{const _=U("loading");return a(),u("div",Ss,[d(t(A),null,{default:c(()=>{var l;return[e[9]||(e[9]=s("h3",null,"评测详情",-1)),i.submission?(a(),u("div",Es,[s("div",Vs,[e[0]||(e[0]=s("span",{class:"item-label"},"编号",-1)),s("span",Cs,o(i.submission.id),1)]),s("div",Ts,[e[1]||(e[1]=s("span",{class:"item-label"},"提交用户",-1)),s("span",ws,o(i.submission.user.name),1)]),s("div",Bs,[e[2]||(e[2]=s("span",{class:"item-label"},"关联试题",-1)),s("span",Ls,o(i.submission.problem.title["zh-CN"]),1)]),s("div",Ns,[e[3]||(e[3]=s("span",{class:"item-label"},"提交时间",-1)),s("span",Is,o(t(P)(i.submission.submittedAt)),1)]),s("div",Ps,[e[4]||(e[4]=s("span",{class:"item-label"},"评测时间",-1)),s("span",Ms,o(t(P)(i.submission.processedAt)),1)]),s("div",Us,[e[5]||(e[5]=s("span",{class:"item-label"},"最终用时",-1)),s("span",zs,o(t(O)(i.submission.time)),1)]),s("div",As,[e[6]||(e[6]=s("span",{class:"item-label"},"评测空间",-1)),s("span",Js,o(t(T)(i.submission.memory)),1)]),s("div",Ws,[e[7]||(e[7]=s("span",{class:"item-label"},"代码长度",-1)),s("span",js,o(i.submission.length),1)]),s("div",qs,[e[8]||(e[8]=s("span",{class:"item-label"},"评测语言",-1)),s("span",Fs,o(((l=t(y)[i.submission.lang])==null?void 0:l.description)??"未知语言"),1)])])):C((a(),u("div",Ks,null,512)),[[_,i.loading]])]}),_:1}),d(t(Q),{type:"primary",onClick:p,disabled:!i.submission},{default:c(()=>e[10]||(e[10]=[D(" 查看试题 ")])),_:1},8,["disabled"])])}}}),Xs=z(Rs,[["__scopeId","data-v-066a1907"]]),Os=w({__name:"ViewSubmissionDetail",props:{rid_str:{}},setup(g){const v=parseInt(g.rid_str),r=f(null),p=f(!0),b=f(()=>{});function i(e){return e==="PD"||e==="JD"}return Y(()=>{Z({id:v}).then(e=>{r.value=e.submission,i(r.value.verdict)&&(b.value=x(v,_=>{r.value={problem:r.value.problem,user:r.value.user,...es(_,["problem","user"])},i(_.verdict)||b.value()}))}).finally(()=>{p.value=!1})}),(e,_)=>(a(),k(ss,null,{main:c(()=>[d(t(A),null,{default:c(()=>[d(Ds,{submission:r.value,loading:p.value},null,8,["submission","loading"])]),_:1})]),sidebar:c(()=>[d(Xs,{submission:r.value,loading:p.value},null,8,["submission","loading"])]),_:1}))}});export{Os as default};
