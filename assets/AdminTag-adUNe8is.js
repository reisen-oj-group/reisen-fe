import{e as O,p as r,P,s as V,h as Y,v as l,w as t,r as s,o as y,g as u,t as j,x as q,y as G,f as H,aY as J,O as m}from"./index-D9OJ9fva.js";const K={class:"config-list"},Q={class:"toolbar"},X=O({__name:"AdminTag",setup(R){const C=r([]),_=r([]),d=r(!1),p=r(!1),v=r(""),i=r({id:0,name:"",classify:0}),k=a=>{const e=_.value.find(n=>n.id===a);return(e==null?void 0:e.name)||"未知"},f=async()=>{},x=async()=>{},w=()=>{var a;v.value="新增标签",i.value={id:0,name:"",classify:((a=_.value[0])==null?void 0:a.id)||0},d.value=!0},B=a=>{v.value="编辑标签",i.value={...a},d.value=!0},E=a=>{J.confirm(`确定删除标签 "${a.name}"?`,"提示",{type:"warning"}).then(async()=>{try{m.success("删除成功"),f()}catch{m.error("删除失败")}})},T=()=>{p.value=!0},I=async()=>{},N=a=>!0,U=()=>{m.success("导入成功"),p.value=!1,f()},$=async()=>{try{i.value.id?m.success("更新成功"):m.success("创建成功"),d.value=!1,f()}catch{m.error("操作失败")}};return P(()=>{f(),x()}),(a,e)=>{const n=s("el-button"),c=s("el-table-column"),D=s("el-table"),M=s("el-input"),b=s("el-form-item"),z=s("el-option"),F=s("el-select"),S=s("el-form"),g=s("el-dialog"),A=s("el-upload");return y(),V("div",K,[Y("div",Q,[l(n,{type:"primary",onClick:w},{default:t(()=>e[5]||(e[5]=[u("新增标签")])),_:1}),l(n,{onClick:T},{default:t(()=>e[6]||(e[6]=[u("导入")])),_:1}),l(n,{onClick:I},{default:t(()=>e[7]||(e[7]=[u("导出")])),_:1})]),l(D,{data:C.value,border:"",style:{width:"100%","margin-top":"20px"}},{default:t(()=>[l(c,{prop:"id",label:"ID",width:"80"}),l(c,{prop:"name",label:"标签名"}),l(c,{prop:"classify",label:"分类"},{default:t(({row:o})=>[u(j(k(o.classify)),1)]),_:1}),l(c,{label:"操作",width:"180"},{default:t(({row:o})=>[l(n,{size:"small",onClick:L=>B(o)},{default:t(()=>e[8]||(e[8]=[u("编辑")])),_:2},1032,["onClick"]),l(n,{size:"small",type:"danger",onClick:L=>E(o)},{default:t(()=>e[9]||(e[9]=[u(" 删除 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(g,{modelValue:d.value,"onUpdate:modelValue":e[3]||(e[3]=o=>d.value=o),title:v.value},{footer:t(()=>[l(n,{onClick:e[2]||(e[2]=o=>d.value=!1)},{default:t(()=>e[10]||(e[10]=[u("取消")])),_:1}),l(n,{type:"primary",onClick:$},{default:t(()=>e[11]||(e[11]=[u("确认")])),_:1})]),default:t(()=>[l(S,{model:i.value,"label-width":"100px"},{default:t(()=>[l(b,{label:"标签名"},{default:t(()=>[l(M,{modelValue:i.value.name,"onUpdate:modelValue":e[0]||(e[0]=o=>i.value.name=o)},null,8,["modelValue"])]),_:1}),l(b,{label:"分类"},{default:t(()=>[l(F,{modelValue:i.value.classify,"onUpdate:modelValue":e[1]||(e[1]=o=>i.value.classify=o)},{default:t(()=>[(y(!0),V(q,null,G(_.value,o=>(y(),H(z,{key:o.id,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),l(g,{modelValue:p.value,"onUpdate:modelValue":e[4]||(e[4]=o=>p.value=o),title:"导入配置"},{default:t(()=>[l(A,{action:"/api/config/import","before-upload":N,"on-success":U,"show-file-list":!1},{default:t(()=>[l(n,{type:"primary"},{default:t(()=>e[12]||(e[12]=[u("点击上传")])),_:1})]),_:1})]),_:1},8,["modelValue"])])}}});export{X as default};
