import{d as $,l as _,I as E,p as I,f as j,P as K,q as t,w as a,aF as A,K as O,c as R,aJ as q,ah as f,r as s,a1 as F,o as y,e as i,t as c,h,R as J,S as L,aI as G,_ as H}from"./index-CDm0RDJi.js";const Q={class:"problem-list"},W={class:"toolbar"},X=$({__name:"AdminProblem",setup(Y){const w=F(),b=_([]),v=_(!1),d=_({status:"",type:"",keyword:""}),u=_({current:1,size:20,total:0}),C=o=>({public:"公开",private:"私有",contest:"比赛"})[o]||"未知",k=o=>({public:"success",private:"info",contest:"warning"})[o]||"",x=o=>({traditional:"传统题",interactive:"交互题"})[o]||"未知",n=async()=>{v.value=!0;try{const o=await q({page:u.value.current});b.value=o.problems,u.value.total=o.total}catch{f.error("获取题目列表失败")}finally{v.value=!1}},z=()=>{},V=o=>{w.push(`/problem/${o.id}/edit`)},T=o=>{G.confirm(`确定删除题目 "${o.title["zh-CN"]||Object.values(o.title)[0]}"?`,"提示",{type:"warning"}).then(async()=>{try{f.success("删除成功"),n()}catch{f.error("删除失败")}})};return E(()=>{n()}),(o,l)=>{const m=s("el-button"),p=s("el-option"),g=s("el-select"),S=s("el-input"),r=s("el-table-column"),P=s("router-link"),B=s("el-tag"),D=s("el-table"),M=s("el-pagination"),N=O("loading");return y(),I("div",Q,[j("div",W,[t(m,{type:"primary",onClick:z},{default:a(()=>l[5]||(l[5]=[i("创建题目")])),_:1}),t(g,{modelValue:d.value.status,"onUpdate:modelValue":l[0]||(l[0]=e=>d.value.status=e),placeholder:"题目状态",clearable:"",style:{width:"120px","margin-left":"10px"},onChange:n},{default:a(()=>[t(p,{label:"全部",value:""}),t(p,{label:"公开",value:"public"}),t(p,{label:"私有",value:"private"}),t(p,{label:"比赛",value:"contest"})]),_:1},8,["modelValue"]),t(g,{modelValue:d.value.type,"onUpdate:modelValue":l[1]||(l[1]=e=>d.value.type=e),placeholder:"题目类型",clearable:"",style:{width:"120px","margin-left":"10px"},onChange:n},{default:a(()=>[t(p,{label:"全部",value:""}),t(p,{label:"传统题",value:"traditional"}),t(p,{label:"交互题",value:"interactive"})]),_:1},8,["modelValue"]),t(S,{modelValue:d.value.keyword,"onUpdate:modelValue":l[2]||(l[2]=e=>d.value.keyword=e),placeholder:"搜索题目",style:{width:"300px","margin-left":"10px"},clearable:"",onClear:n,onKeyup:A(n,["enter"])},{append:a(()=>[t(m,{icon:"search",onClick:n})]),_:1},8,["modelValue"])]),K((y(),R(D,{data:b.value,border:"",style:{width:"100%","margin-top":"20px"}},{default:a(()=>[t(r,{prop:"id",label:"ID",width:"120"}),t(r,{label:"标题","min-width":"200"},{default:a(({row:e})=>[t(P,{to:`/admin/problems/${e.id}`,class:"title-link"},{default:a(()=>[i(c(e.title["zh-CN"]||Object.values(e.title)[0]),1)]),_:2},1032,["to"])]),_:1}),t(r,{label:"状态",width:"100"},{default:a(({row:e})=>[t(B,{type:k(e.status)},{default:a(()=>[i(c(C(e.status)),1)]),_:2},1032,["type"])]),_:1}),t(r,{label:"类型",width:"100"},{default:a(({row:e})=>[i(c(x(e.type)),1)]),_:1}),t(r,{label:"时间限制",width:"120"},{default:a(({row:e})=>[i(c(h(J)(e.limitTime)),1)]),_:1}),t(r,{label:"空间限制",width:"120"},{default:a(({row:e})=>[i(c(h(L)(e.limitMemory)),1)]),_:1}),t(r,{label:"难度",width:"120"},{default:a(({row:e})=>[i(c(e.difficulty),1)]),_:1}),t(r,{label:"操作",width:"180",fixed:"right"},{default:a(({row:e})=>[t(m,{link:"",type:"primary",size:"small",onClick:U=>V(e)},{default:a(()=>l[6]||(l[6]=[i("编辑")])),_:2},1032,["onClick"]),t(m,{link:"",type:"danger",size:"small",onClick:U=>T(e)},{default:a(()=>l[7]||(l[7]=[i("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[N,v.value]]),t(M,{"current-page":u.value.current,"onUpdate:currentPage":l[3]||(l[3]=e=>u.value.current=e),"page-size":u.value.size,"onUpdate:pageSize":l[4]||(l[4]=e=>u.value.size=e),total:u.value.total,layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,50,100],onSizeChange:n,onCurrentChange:n},null,8,["current-page","page-size","total"])])}}}),ee=H(X,[["__scopeId","data-v-fc67ef5c"]]);export{ee as default};
